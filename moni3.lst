 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 1 - 2025年01月23日 14時38分38秒


    1/   0 :                            ;/*
    2/   0 :                            ; ===========================================
    3/   0 :                            ; *	SC/MP-III Sample Program
    4/   0 :                            ; ===========================================
    5/   0 :                            ; */
    6/   0 :                            ;
    7/   0 :                            ; プリアンブル
    8/   0 :                            ; ------------
    9/   0 :                            	  cpu 8070
   10/   0 :                            	  org 0
   11/   0 :                            
   12/   0 : =0xFF80                    wk1  = 0xff80
   13/   0 : =0xFF81                    cnt1 = 0xff81
   14/   0 : =0xFF82                    cnt2 = 0xff82
   15/   0 : =0xFF83                    r4   = 0xff83
   16/   0 : =0xFF84                    p4   = 0xff84
   17/   0 : =0xFF86                    p5   = 0xff86
   18/   0 :                            
   19/   0 :                            ; ------------
   20/   0 :                            ; ワークエリア
   21/   0 :                            
   22/   0 :                            ;; 除算ワーク. q0:q3 = 被除数 q4:q5 = 除数.
   23/   0 : =0xFFA0                    q0 = 0xffa0
   24/   0 : =0xFFA1                    q1 = 0xffa1
   25/   0 : =0xFFA2                    q2 = 0xffa2
   26/   0 : =0xFFA3                    q3 = 0xffa3
   27/   0 : =0xFFA4                    q4 = 0xffa4
   28/   0 : =0xFFA5                    q5 = 0xffa5
   29/   0 :                            
   30/   0 : =0xFFA8                    r0 = 0xffa8
   31/   0 : =0xFFAA                    r1 = 0xffaa
   32/   0 : =0xFFAC                    r2 = 0xffac
   33/   0 : =0xFFAE                    r3 = 0xffae
   34/   0 :                            
   35/   0 :                            ;; CYフラグ代用
   36/   0 : =0xFFB0                    cyr0 = 0xffb0
   37/   0 : =0xFFB1                    cyr1 = 0xffb1
   38/   0 : =0xFFB2                    cyr2 = 0xffb2
   39/   0 :                            
   40/   0 :                            ;; 収束ループカウンタ
   41/   0 : =0xFFB3                    cnt3 = 0xffb3
   42/   0 : =0xFFB4                    cnt4 = 0xffb4
   43/   0 :                            
   44/   0 :                            ;; arctan()計算引数
   45/   0 : =0xFFB6                    m1    = 0xffb6
   46/   0 : =0xFFB8                    n1    = 0xffb8
   47/   0 :                            
   48/   0 :                            ;; arctan()内部変数
   49/   0 : =0xFFB9                    sign1 = 0xffb9
   50/   0 : =0xFFBA                    tab1  = 0xffba
   51/   0 : =0xFFBB                    lf1   = 0xffbb
   52/   0 : =0xFFBC                    chr1  = 0xffbc
   53/   0 : =0xFFBD                    top1  = 0xffbd
   54/   0 :                            
   55/   0 : =0xFFC0                    indx0 = 0xffc0
   56/   0 : =0xFFC1                    indx1 = 0xffc1
   57/   0 :                            
   58/   0 :                            ;; n_2 = n1 * n1
   59/   0 : =0xFFC2                    n_2    = 0xffc2
   60/   0 :                            
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 2 - 2025年01月23日 14時38分38秒


   61/   0 :                            ;; 除算カウンタ16回.
   62/   0 : =0xFFC4                    divcnt = 0xffc4
   63/   0 :                            
   64/   0 :                            ;; 計算する桁数（２進数の配列バイト数）
   65/   0 : =0x1388                    PRECISION = 5000
   66/   0 :                            
   67/   0 :                            ;; 16bit値 デクリメントしてゼロチェック ==>Areg .
   68/   0 :                            dec_w macro work
   69/   0 :                            	ld ea,work
   70/   0 :                            	sub ea, =1
   71/   0 :                            	st ea,work
   72/   0 :                            	
   73/   0 :                            	or a,e
   74/   0 :                            
   75/   0 :                            	endm
   76/   0 :                            
   77/   0 :                            
   78/   0 :                            ;// スタート
   79/   0 :                            ;	 nop;
   80/   0 : 00                         	nop
   81/   1 :                            ;	 sp=0x8000;
   82/   1 : 25 00 80                   	ld	sp, =0x8000
   83/   4 :                            ;	 jmp(main);
   84/   4 : 24 0C 00                   	jmp	main
   85/   7 :                            ;
   86/   7 :                            ;getc()
   87/   7 :                            ;{
   88/   7 :                            getc:
   89/   7 :                            ;     db(2);
   90/   7 : 02                         	db	2
   91/   8 :                            ;}
   92/   8 : 5C                         	ret
   93/   9 :                            ;putc()
   94/   9 :                            ;{
   95/   9 :                            putc:
   96/   9 :                            ;     db(3);
   97/   9 : 03                         	db	3
   98/   A :                            ;}
   99/   A : 5C                         	ret
  100/   B :                            ;exit()
  101/   B :                            ;{
  102/   B :                            exit:
  103/   B :                            ;     db(4);
  104/   B : 04                         	db	4
  105/   C :                            ;}
  106/   C : 5C                         	ret
  107/   D :                            ;
  108/   D :                            ;// メイン
  109/   D :                            ;main()
  110/   D :                            ;{
  111/   D :                            main:
  112/   D :                            ;	p2=#msg1;puts();	
  113/   D : 26 02 02                   	ld	p2, =msg1
  114/  10 : 20 E0 01                   	jsr	puts
  115/  13 :                            ;
  116/  13 :                            ;	pi_main();
  117/  13 : 20 13 06                   	jsr	pi_main
  118/  16 :                            ;	
  119/  16 :                            ;//	benchmark();
  120/  16 :                            ;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 3 - 2025年01月23日 14時38分38秒


  121/  16 :                            ;	while(1) {	
  122/  16 :                            __wh000:
  123/  16 :                            ;		a='>';putc();
  124/  16 : C4 3E                      	ld	a, ='>'
  125/  18 : 20 08 00                   	jsr	putc
  126/  1B :                            ;		p2=#inbuf;gets();
  127/  1B : 26 1B 02                   	ld	p2, =inbuf
  128/  1E : 20 EA 01                   	jsr	gets
  129/  21 :                            ;
  130/  21 :                            ;		// ECHO BACK.
  131/  21 :                            ;		p2=#inbuf;puts();
  132/  21 : 26 1B 02                   	ld	p2, =inbuf
  133/  24 : 20 E0 01                   	jsr	puts
  134/  27 :                            ;
  135/  27 :                            ;		//
  136/  27 :                            ;		p2=#inbuf;cmd();
  137/  27 : 26 1B 02                   	ld	p2, =inbuf
  138/  2A : 20 61 00                   	jsr	cmd
  139/  2D :                            ;	}
  140/  2D : 24 15 00                   	jmp	__wh000
  141/  30 :                            __ew000:
  142/  30 :                            ;	exit();
  143/  30 : 20 0A 00                   	jsr	exit
  144/  33 :                            ;}
  145/  33 : 5C                         	ret
  146/  34 :                            ;
  147/  34 :                            ;benchmark()
  148/  34 :                            ;{
  149/  34 :                            benchmark:
  150/  34 :                            ;	cnt1=0;
  151/  34 : C4 00                      	ld	a, =0
  152/  36 : CD 81                      	st	a,cnt1
  153/  38 :                            ;	do {
  154/  38 :                            __do001:
  155/  38 :                            ;		cnt2=0;
  156/  38 : C4 00                      	ld	a, =0
  157/  3A : CD 82                      	st	a,cnt2
  158/  3C :                            ;		do {
  159/  3C :                            __do002:
  160/  3C :                            ;			bench_subr();
  161/  3C : 20 50 00                   	jsr	bench_subr
  162/  3F :                            ;		}while(--cnt2);
  163/  3F : 9D 82                      	dld	A,cnt2
  164/  41 : 7C F9                      	bnz	__do002
  165/  43 :                            __od002:
  166/  43 :                            ;	}while(--cnt1);
  167/  43 : 9D 81                      	dld	A,cnt1
  168/  45 : 7C F1                      	bnz	__do001
  169/  47 :                            __od001:
  170/  47 :                            ;	p2=#msg1;puts();	
  171/  47 : 26 02 02                   	ld	p2, =msg1
  172/  4A : 20 E0 01                   	jsr	puts
  173/  4D :                            ;	exit();
  174/  4D : 20 0A 00                   	jsr	exit
  175/  50 :                            ;}
  176/  50 : 5C                         	ret
  177/  51 :                            ;
  178/  51 :                            ;bench_subr()
  179/  51 :                            ;{
  180/  51 :                            bench_subr:
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 4 - 2025年01月23日 14時38分38秒


  181/  51 :                            ;	p4=0;
  182/  51 : C4 00                      	ld	a, =0
  183/  53 : CD 84                      	st	a,p4
  184/  55 :                            ;	do {
  185/  55 :                            __do003:
  186/  55 :                            ;		bench_subr2();
  187/  55 : 20 5C 00                   	jsr	bench_subr2
  188/  58 :                            ;	}while(--p4);
  189/  58 : 9D 84                      	dld	A,p4
  190/  5A : 7C F9                      	bnz	__do003
  191/  5C :                            __od003:
  192/  5C :                            ;}
  193/  5C : 5C                         	ret
  194/  5D :                            ;bench_subr2()
  195/  5D :                            ;{
  196/  5D :                            bench_subr2:
  197/  5D :                            ;	push(ea);
  198/  5D : 08                         	push	ea
  199/  5E :                            ;	push(ea);
  200/  5E : 08                         	push	ea
  201/  5F :                            ;	pop(ea);
  202/  5F : 3A                         	pop	ea
  203/  60 :                            ;	pop(ea);
  204/  60 : 3A                         	pop	ea
  205/  61 :                            ;}
  206/  61 : 5C                         	ret
  207/  62 :                            ;
  208/  62 :                            ;// P2 ポインタの１行バッファをcmd解釈.
  209/  62 :                            ;// ワーク：
  210/  62 :                            ;//    p4 = readhex()の戻り値.
  211/  62 :                            ;//    p5 = 注目メモリーアドレスを覚えておく.
  212/  62 :                            ;cmd()
  213/  62 :                            ;{
  214/  62 :                            cmd:
  215/  62 :                            ;	a=*p2++;lc();e=a;
  216/  62 : C6 01                      	ld	a, @1,p2
  217/  64 : 20 43 01                   	jsr	lc
  218/  67 : 48                         	ld	e,a
  219/  68 :                            ;	if(e=='d') {
  220/  68 : 40                         	ld	a,e
  221/  69 : FC 64                      	sub	a, ='d'
  222/  6B : 7C 19                      	bnz	__el004
  223/  6D :                            ;		sp_skip();
  224/  6D : 20 8E 00                   	jsr	sp_skip
  225/  70 :                            ;		readhex();
  226/  70 : 20 A7 00                   	jsr	readhex
  227/  73 :                            ;		if(a!=0) {
  228/  73 : 6C 04                      	bz	__el005
  229/  75 :                            ;			ea=p4;
  230/  75 : 85 84                      	ld	ea,p4
  231/  77 :                            ;			p5=ea;
  232/  77 : 8D 86                      	st	ea,p5
  233/  79 :                            ;		}
  234/  79 :                            ;		ea=p5;p2=ea;mdump(); //メモリーダンプの実行.
  235/  79 :                            __el005:
  236/  79 : 85 86                      	ld	ea,p5
  237/  7B : 46                         	ld	p2,ea
  238/  7C : 20 56 01                   	jsr	mdump
  239/  7F :                            ;
  240/  7F :                            ;		ea=p5;ea+=0x100;p5=ea;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 5 - 2025年01月23日 14時38分38秒


  241/  7F : 85 86                      	ld	ea,p5
  242/  81 : B4 00 01                   	add	ea, =0x100
  243/  84 : 8D 86                      	st	ea,p5
  244/  86 :                            ;	}	
  245/  86 :                            ;	if(e=='q') {
  246/  86 :                            __el004:
  247/  86 : 40                         	ld	a,e
  248/  87 : FC 71                      	sub	a, ='q'
  249/  89 : 7C 03                      	bnz	__el006
  250/  8B :                            ;		exit();
  251/  8B : 20 0A 00                   	jsr	exit
  252/  8E :                            ;	}	
  253/  8E :                            ;}
  254/  8E :                            __el006:
  255/  8E : 5C                         	ret
  256/  8F :                            ;
  257/  8F :                            ;// ==========================================
  258/  8F :                            ;// 入力関数
  259/  8F :                            ;
  260/  8F :                            ;// P2 ポインタの空白文字飛ばし.
  261/  8F :                            ;sp_skip()
  262/  8F :                            ;{
  263/  8F :                            sp_skip:
  264/  8F :                            ;	a=*p2;
  265/  8F : C2 00                      	ld	a, 0,p2
  266/  91 :                            ;	while(a==' ') {
  267/  91 :                            __wh007:
  268/  91 : FC 20                      	sub	a, =' '
  269/  93 : 7C 07                      	bnz	__ew007
  270/  95 :                            ;		a=*p2++;  // p2++ だけしたい.
  271/  95 : C6 01                      	ld	a, @1,p2
  272/  97 :                            ;		a=*p2;
  273/  97 : C2 00                      	ld	a, 0,p2
  274/  99 :                            ;	}
  275/  99 : 24 90 00                   	jmp	__wh007
  276/  9C :                            __ew007:
  277/  9C :                            ;}
  278/  9C : 5C                         	ret
  279/  9D :                            ;
  280/  9D :                            ;p4mul16()
  281/  9D :                            ;{
  282/  9D :                            p4mul16:
  283/  9D :                            ;	push(ea);
  284/  9D : 08                         	push	ea
  285/  9E :                            ;	ea=p4;
  286/  9E : 85 84                      	ld	ea,p4
  287/  A0 :                            ;	sl(ea);
  288/  A0 : 0F                         	sl	ea
  289/  A1 :                            ;	sl(ea);
  290/  A1 : 0F                         	sl	ea
  291/  A2 :                            ;	sl(ea);
  292/  A2 : 0F                         	sl	ea
  293/  A3 :                            ;	sl(ea);
  294/  A3 : 0F                         	sl	ea
  295/  A4 :                            ;	p4=ea;
  296/  A4 : 8D 84                      	st	ea,p4
  297/  A6 :                            ;	pop(ea);
  298/  A6 : 3A                         	pop	ea
  299/  A7 :                            ;}
  300/  A7 : 5C                         	ret
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 6 - 2025年01月23日 14時38分38秒


  301/  A8 :                            ;
  302/  A8 :                            ;// P2 ポインタから16進HEX読み. ==> p4に結果. 入力された桁数=Areg
  303/  A8 :                            ;readhex()
  304/  A8 :                            ;{
  305/  A8 :                            readhex:
  306/  A8 :                            ;	ea=0;
  307/  A8 : 84 00 00                   	ld	ea, =0
  308/  AB :                            ;	p4=ea;
  309/  AB : 8D 84                      	st	ea,p4
  310/  AD :                            ;	r4=a;
  311/  AD : CD 83                      	st	a,r4
  312/  AF :                            ;	while(1) {
  313/  AF :                            __wh008:
  314/  AF :                            ;		a=*p2++;e=a;
  315/  AF : C6 01                      	ld	a, @1,p2
  316/  B1 : 48                         	ld	e,a
  317/  B2 :                            ;		readhex1();e=a;
  318/  B2 : 20 D6 00                   	jsr	readhex1
  319/  B5 : 48                         	ld	e,a
  320/  B6 :                            ;		if(e!=0xff) {
  321/  B6 : 40                         	ld	a,e
  322/  B7 : FC FF                      	sub	a, =0xff
  323/  B9 : 6C 15                      	bz	__el009
  324/  BB :                            ;			p4mul16();
  325/  BB : 20 9C 00                   	jsr	p4mul16
  326/  BE :                            ;			a=e;e=0;
  327/  BE : 40                         	ld	a,e
  328/  BF : 01                         	xch	e,a
  329/  C0 : C4 00                      	ld	a, =0
  330/  C2 : 01                         	xch	e,a
  331/  C3 :                            ;			ea+=p4;
  332/  C3 : B5 84                      	add	ea,p4
  333/  C5 :                            ;			p4=ea;
  334/  C5 : 8D 84                      	st	ea,p4
  335/  C7 :                            ;			a=r4;a+=1;r4=a;
  336/  C7 : C5 83                      	ld	a,r4
  337/  C9 : F4 01                      	add	a, =1
  338/  CB : CD 83                      	st	a,r4
  339/  CD :                            ;		}else{
  340/  CD : 24 D2 00                   	jmp	__fi009
  341/  D0 :                            __el009:
  342/  D0 :                            ;			a=r4;
  343/  D0 : C5 83                      	ld	a,r4
  344/  D2 :                            ;			return;
  345/  D2 : 5C                         	ret
  346/  D3 :                            ;		}
  347/  D3 :                            __fi009:
  348/  D3 :                            ;	}
  349/  D3 : 24 AE 00                   	jmp	__wh008
  350/  D6 :                            __ew008:
  351/  D6 :                            ;}
  352/  D6 : 5C                         	ret
  353/  D7 :                            ;
  354/  D7 :                            ;readhex1()
  355/  D7 :                            ;{
  356/  D7 :                            readhex1:
  357/  D7 :                            ;	lc();e=a;
  358/  D7 : 20 43 01                   	jsr	lc
  359/  DA : 48                         	ld	e,a
  360/  DB :                            ;	if(e>='0') {
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 7 - 2025年01月23日 14時38分38秒


  361/  DB : 40                         	ld	a,e
  362/  DC : FC 30                      	sub	a, ='0'
  363/  DE : 64 02                      	bp	$+4
  364/  E0 : 74 09                      	bra	__el010
  365/  E2 :                            ;		if(e<0x3a) { // <='9'
  366/  E2 : 40                         	ld	a,e
  367/  E3 : FC 3A                      	sub	a, =0x3a
  368/  E5 : 64 04                      	bp	__el011
  369/  E7 :                            ;			a=e;
  370/  E7 : 40                         	ld	a,e
  371/  E8 :                            ;			a-=0x30;
  372/  E8 : FC 30                      	sub	a, =0x30
  373/  EA :                            ;			return;
  374/  EA : 5C                         	ret
  375/  EB :                            ;		}
  376/  EB :                            ;	}
  377/  EB :                            __el011:
  378/  EB :                            ;	if(e>='a') {
  379/  EB :                            __el010:
  380/  EB : 40                         	ld	a,e
  381/  EC : FC 61                      	sub	a, ='a'
  382/  EE : 64 02                      	bp	$+4
  383/  F0 : 74 09                      	bra	__el012
  384/  F2 :                            ;		if(e<'g') {
  385/  F2 : 40                         	ld	a,e
  386/  F3 : FC 67                      	sub	a, ='g'
  387/  F5 : 64 04                      	bp	__el013
  388/  F7 :                            ;			a=e;
  389/  F7 : 40                         	ld	a,e
  390/  F8 :                            ;			a-=0x57;  // 0x61 - 10
  391/  F8 : FC 57                      	sub	a, =0x57
  392/  FA :                            ;			return;
  393/  FA : 5C                         	ret
  394/  FB :                            ;		}
  395/  FB :                            ;	}
  396/  FB :                            __el013:
  397/  FB :                            ;	a=0xff;
  398/  FB :                            __el012:
  399/  FB : C4 FF                      	ld	a, =0xff
  400/  FD :                            ;}
  401/  FD : 5C                         	ret
  402/  FE :                            ;
  403/  FE :                            ;
  404/  FE :                            ;// ==========================================
  405/  FE :                            ;// 出力関数
  406/  FE :                            ;
  407/  FE :                            ;//  アスキーダンプ１行
  408/  FE :                            ;ascdump_16()
  409/  FE :                            ;{
  410/  FE :                            ascdump_16:
  411/  FE :                            ;	push(p2);
  412/  FE : 56                         	push	p2
  413/  FF :                            ;	p2=ea;
  414/  FF : 46                         	ld	p2,ea
  415/ 100 :                            ;	ascdump_8();
  416/ 100 : 20 0A 01                   	jsr	ascdump_8
  417/ 103 :                            ;	pr_spc();
  418/ 103 : 20 CF 01                   	jsr	pr_spc
  419/ 106 :                            ;	ascdump_8();
  420/ 106 : 20 0A 01                   	jsr	ascdump_8
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 8 - 2025年01月23日 14時38分38秒


  421/ 109 :                            ;	pop(p2);
  422/ 109 : 5E                         	pop	p2
  423/ 10A :                            ;}
  424/ 10A : 5C                         	ret
  425/ 10B :                            ;
  426/ 10B :                            ;//  アスキーダンプ8byte
  427/ 10B :                            ;ascdump_8()
  428/ 10B :                            ;{
  429/ 10B :                            ascdump_8:
  430/ 10B :                            ;	a=8;cnt2=a;
  431/ 10B : C4 08                      	ld	a, =8
  432/ 10D : CD 82                      	st	a,cnt2
  433/ 10F :                            ;	do {
  434/ 10F :                            __do014:
  435/ 10F :                            ;		a=*p2++;
  436/ 10F : C6 01                      	ld	a, @1,p2
  437/ 111 :                            ;		ascdump1();
  438/ 111 : 20 18 01                   	jsr	ascdump1
  439/ 114 :                            ;	} while(--cnt2);
  440/ 114 : 9D 82                      	dld	A,cnt2
  441/ 116 : 7C F7                      	bnz	__do014
  442/ 118 :                            __od014:
  443/ 118 :                            ;}
  444/ 118 : 5C                         	ret
  445/ 119 :                            ;
  446/ 119 :                            ;//  アスキーダンプ1byte
  447/ 119 :                            ;ascdump1()
  448/ 119 :                            ;{
  449/ 119 :                            ascdump1:
  450/ 119 :                            ;	e=a;
  451/ 119 : 48                         	ld	e,a
  452/ 11A :                            ;	if(e<0x20) {
  453/ 11A : 40                         	ld	a,e
  454/ 11B : FC 20                      	sub	a, =0x20
  455/ 11D : 64 03                      	bp	__el015
  456/ 11F :                            ;		a=' ';e=a;
  457/ 11F : C4 20                      	ld	a, =' '
  458/ 121 : 48                         	ld	e,a
  459/ 122 :                            ;	}
  460/ 122 :                            ;	if(e>=0x7f) {
  461/ 122 :                            __el015:
  462/ 122 : 40                         	ld	a,e
  463/ 123 : FC 7F                      	sub	a, =0x7f
  464/ 125 : 64 02                      	bp	$+4
  465/ 127 : 74 03                      	bra	__el016
  466/ 129 :                            ;		a=' ';e=a;
  467/ 129 : C4 20                      	ld	a, =' '
  468/ 12B : 48                         	ld	e,a
  469/ 12C :                            ;	}
  470/ 12C :                            ;	a=e;putc();
  471/ 12C :                            __el016:
  472/ 12C : 40                         	ld	a,e
  473/ 12D : 20 08 00                   	jsr	putc
  474/ 130 :                            ;}
  475/ 130 : 5C                         	ret
  476/ 131 :                            ;
  477/ 131 :                            ;//  大文字にする.
  478/ 131 :                            ;uc()
  479/ 131 :                            ;{
  480/ 131 :                            uc:
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 9 - 2025年01月23日 14時38分38秒


  481/ 131 :                            ;	e=a;
  482/ 131 : 48                         	ld	e,a
  483/ 132 :                            ;	if(e>='a') {
  484/ 132 : 40                         	ld	a,e
  485/ 133 : FC 61                      	sub	a, ='a'
  486/ 135 : 64 02                      	bp	$+4
  487/ 137 : 74 09                      	bra	__el017
  488/ 139 :                            ;		if(e<0x7b) {  // <='z'
  489/ 139 : 40                         	ld	a,e
  490/ 13A : FC 7B                      	sub	a, =0x7b
  491/ 13C : 64 04                      	bp	__el018
  492/ 13E :                            ;			a=e;
  493/ 13E : 40                         	ld	a,e
  494/ 13F :                            ;			a-=0x20;
  495/ 13F : FC 20                      	sub	a, =0x20
  496/ 141 :                            ;			return;
  497/ 141 : 5C                         	ret
  498/ 142 :                            ;		}
  499/ 142 :                            ;	}
  500/ 142 :                            __el018:
  501/ 142 :                            ;	a=e;
  502/ 142 :                            __el017:
  503/ 142 : 40                         	ld	a,e
  504/ 143 :                            ;}
  505/ 143 : 5C                         	ret
  506/ 144 :                            ;
  507/ 144 :                            ;//  小文字にする.
  508/ 144 :                            ;lc()
  509/ 144 :                            ;{
  510/ 144 :                            lc:
  511/ 144 :                            ;	e=a;
  512/ 144 : 48                         	ld	e,a
  513/ 145 :                            ;	if(e>='A') {
  514/ 145 : 40                         	ld	a,e
  515/ 146 : FC 41                      	sub	a, ='A'
  516/ 148 : 64 02                      	bp	$+4
  517/ 14A : 74 09                      	bra	__el019
  518/ 14C :                            ;		if(e<0x5b) {  // <='Z'
  519/ 14C : 40                         	ld	a,e
  520/ 14D : FC 5B                      	sub	a, =0x5b
  521/ 14F : 64 04                      	bp	__el020
  522/ 151 :                            ;			a=e;
  523/ 151 : 40                         	ld	a,e
  524/ 152 :                            ;			a+=0x20;
  525/ 152 : F4 20                      	add	a, =0x20
  526/ 154 :                            ;			return;
  527/ 154 : 5C                         	ret
  528/ 155 :                            ;		}
  529/ 155 :                            ;	}
  530/ 155 :                            __el020:
  531/ 155 :                            ;	a=e;
  532/ 155 :                            __el019:
  533/ 155 : 40                         	ld	a,e
  534/ 156 :                            ;}
  535/ 156 : 5C                         	ret
  536/ 157 :                            ;
  537/ 157 :                            ;
  538/ 157 :                            ;//  メモリーダンプ
  539/ 157 :                            ;mdump()
  540/ 157 :                            ;{
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 10 - 2025年01月23日 14時38分38秒


  541/ 157 :                            mdump:
  542/ 157 :                            ;	a=16;cnt1=a;
  543/ 157 : C4 10                      	ld	a, =16
  544/ 159 : CD 81                      	st	a,cnt1
  545/ 15B :                            ;	do {
  546/ 15B :                            __do021:
  547/ 15B :                            ;		mdump_16();
  548/ 15B : 20 62 01                   	jsr	mdump_16
  549/ 15E :                            ;	} while(--cnt1);
  550/ 15E : 9D 81                      	dld	A,cnt1
  551/ 160 : 7C F9                      	bnz	__do021
  552/ 162 :                            __od021:
  553/ 162 :                            ;}
  554/ 162 : 5C                         	ret
  555/ 163 :                            ;
  556/ 163 :                            ;//  メモリーダンプ16byte
  557/ 163 :                            ;mdump_16()
  558/ 163 :                            ;{
  559/ 163 :                            mdump_16:
  560/ 163 :                            ;	ea=p2;
  561/ 163 : 32                         	ld	ea,p2
  562/ 164 :                            ;	prhex4();
  563/ 164 : 20 9F 01                   	jsr	prhex4
  564/ 167 :                            ;	pr_spc();
  565/ 167 : 20 CF 01                   	jsr	pr_spc
  566/ 16A :                            ;
  567/ 16A :                            ;	mdump_8();
  568/ 16A : 20 7D 01                   	jsr	mdump_8
  569/ 16D :                            ;	pr_spc();
  570/ 16D : 20 CF 01                   	jsr	pr_spc
  571/ 170 :                            ;	mdump_8();
  572/ 170 : 20 7D 01                   	jsr	mdump_8
  573/ 173 :                            ;
  574/ 173 :                            ;// ASCII DUMP
  575/ 173 :                            ;	ea=p2;ea-=16;
  576/ 173 : 32                         	ld	ea,p2
  577/ 174 : BC 10 00                   	sub	ea, =16
  578/ 177 :                            ;	ascdump_16();
  579/ 177 : 20 FD 00                   	jsr	ascdump_16
  580/ 17A :                            ;
  581/ 17A :                            ;	put_crlf();
  582/ 17A : 20 D5 01                   	jsr	put_crlf
  583/ 17D :                            ;}
  584/ 17D : 5C                         	ret
  585/ 17E :                            ;
  586/ 17E :                            ;//  メモリーダンプ8byte
  587/ 17E :                            ;mdump_8()
  588/ 17E :                            ;{
  589/ 17E :                            mdump_8:
  590/ 17E :                            ;	a=8;cnt2=a;
  591/ 17E : C4 08                      	ld	a, =8
  592/ 180 : CD 82                      	st	a,cnt2
  593/ 182 :                            ;	do {
  594/ 182 :                            __do022:
  595/ 182 :                            ;		a=*p2++;
  596/ 182 : C6 01                      	ld	a, @1,p2
  597/ 184 :                            ;		prhex2();
  598/ 184 : 20 A8 01                   	jsr	prhex2
  599/ 187 :                            ;		pr_spc();
  600/ 187 : 20 CF 01                   	jsr	pr_spc
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 11 - 2025年01月23日 14時38分38秒


  601/ 18A :                            ;	} while(--cnt2);
  602/ 18A : 9D 82                      	dld	A,cnt2
  603/ 18C : 7C F4                      	bnz	__do022
  604/ 18E :                            __od022:
  605/ 18E :                            ;}
  606/ 18E : 5C                         	ret
  607/ 18F :                            ;
  608/ 18F :                            ;//  メモリーダンプ8byte
  609/ 18F :                            ;mdump_b16()
  610/ 18F :                            ;{
  611/ 18F :                            mdump_b16:
  612/ 18F :                            ;	a=16;cnt2=a;
  613/ 18F : C4 10                      	ld	a, =16
  614/ 191 : CD 82                      	st	a,cnt2
  615/ 193 :                            ;	do {
  616/ 193 :                            __do023:
  617/ 193 :                            ;		a=*p2++;
  618/ 193 : C6 01                      	ld	a, @1,p2
  619/ 195 :                            ;		prhex2();
  620/ 195 : 20 A8 01                   	jsr	prhex2
  621/ 198 :                            ;		pr_spc();
  622/ 198 : 20 CF 01                   	jsr	pr_spc
  623/ 19B :                            ;	} while(--cnt2);
  624/ 19B : 9D 82                      	dld	A,cnt2
  625/ 19D : 7C F4                      	bnz	__do023
  626/ 19F :                            __od023:
  627/ 19F :                            ;}
  628/ 19F : 5C                         	ret
  629/ 1A0 :                            ;
  630/ 1A0 :                            ;//  EAレジスタを16進4桁表示
  631/ 1A0 :                            ;prhex4()
  632/ 1A0 :                            ;{
  633/ 1A0 :                            prhex4:
  634/ 1A0 :                            ;	a<>e;
  635/ 1A0 : 01                         	xch	a,e
  636/ 1A1 :                            ;	prhex2();
  637/ 1A1 : 20 A8 01                   	jsr	prhex2
  638/ 1A4 :                            ;	a<>e;
  639/ 1A4 : 01                         	xch	a,e
  640/ 1A5 :                            ;	prhex2();
  641/ 1A5 : 20 A8 01                   	jsr	prhex2
  642/ 1A8 :                            ;}
  643/ 1A8 : 5C                         	ret
  644/ 1A9 :                            ;
  645/ 1A9 :                            ;//  Aレジスタを16進2桁表示
  646/ 1A9 :                            ;prhex2()
  647/ 1A9 :                            ;{
  648/ 1A9 :                            prhex2:
  649/ 1A9 :                            ;	push(ea);
  650/ 1A9 : 08                         	push	ea
  651/ 1AA :                            ;	e=a;
  652/ 1AA : 48                         	ld	e,a
  653/ 1AB :                            ;	a>>=1;
  654/ 1AB : 3C                         	sr	a
  655/ 1AC :                            ;	a>>=1;
  656/ 1AC : 3C                         	sr	a
  657/ 1AD :                            ;	a>>=1;
  658/ 1AD : 3C                         	sr	a
  659/ 1AE :                            ;	a>>=1;
  660/ 1AE : 3C                         	sr	a
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 12 - 2025年01月23日 14時38分38秒


  661/ 1AF :                            ;	prhex1();
  662/ 1AF : 20 B7 01                   	jsr	prhex1
  663/ 1B2 :                            ;
  664/ 1B2 :                            ;	a=e;
  665/ 1B2 : 40                         	ld	a,e
  666/ 1B3 :                            ;	prhex1();
  667/ 1B3 : 20 B7 01                   	jsr	prhex1
  668/ 1B6 :                            ;	pop(ea);
  669/ 1B6 : 3A                         	pop	ea
  670/ 1B7 :                            ;}
  671/ 1B7 : 5C                         	ret
  672/ 1B8 :                            ;
  673/ 1B8 :                            ;//  Aレジスタ下位4bitのみを16進1桁表示
  674/ 1B8 :                            ;prhex1()
  675/ 1B8 :                            ;{
  676/ 1B8 :                            prhex1:
  677/ 1B8 :                            ;	push(ea);
  678/ 1B8 : 08                         	push	ea
  679/ 1B9 :                            ;	a&=0x0f;
  680/ 1B9 : D4 0F                      	and	a, =0x0f
  681/ 1BB :                            ;	e=a;
  682/ 1BB : 48                         	ld	e,a
  683/ 1BC :                            ;	if( a >= 10) {
  684/ 1BC : FC 0A                      	sub	a, =10
  685/ 1BE : 64 02                      	bp	$+4
  686/ 1C0 : 74 06                      	bra	__el024
  687/ 1C2 :                            ;		a=e;a+=7;
  688/ 1C2 : 40                         	ld	a,e
  689/ 1C3 : F4 07                      	add	a, =7
  690/ 1C5 :                            ;	}else{
  691/ 1C5 : 24 C8 01                   	jmp	__fi024
  692/ 1C8 :                            __el024:
  693/ 1C8 :                            ;		a=e;
  694/ 1C8 : 40                         	ld	a,e
  695/ 1C9 :                            ;	}
  696/ 1C9 :                            __fi024:
  697/ 1C9 :                            ;	a += 0x30;
  698/ 1C9 : F4 30                      	add	a, =0x30
  699/ 1CB :                            ;	putc();
  700/ 1CB : 20 08 00                   	jsr	putc
  701/ 1CE :                            ;	pop(ea);
  702/ 1CE : 3A                         	pop	ea
  703/ 1CF :                            ;}
  704/ 1CF : 5C                         	ret
  705/ 1D0 :                            ;//  空白文字を1つ出力
  706/ 1D0 :                            ;pr_spc()
  707/ 1D0 :                            ;{
  708/ 1D0 :                            pr_spc:
  709/ 1D0 :                            ;	a=' ';putc();
  710/ 1D0 : C4 20                      	ld	a, =' '
  711/ 1D2 : 20 08 00                   	jsr	putc
  712/ 1D5 :                            ;}
  713/ 1D5 : 5C                         	ret
  714/ 1D6 :                            ;
  715/ 1D6 :                            ;//  改行コード出力
  716/ 1D6 :                            ;put_crlf()
  717/ 1D6 :                            ;{
  718/ 1D6 :                            put_crlf:
  719/ 1D6 :                            ;	a=0x0d;putc();
  720/ 1D6 : C4 0D                      	ld	a, =0x0d
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 13 - 2025年01月23日 14時38分38秒


  721/ 1D8 : 20 08 00                   	jsr	putc
  722/ 1DB :                            ;	a=0x0a;putc();
  723/ 1DB : C4 0A                      	ld	a, =0x0a
  724/ 1DD : 20 08 00                   	jsr	putc
  725/ 1E0 :                            ;}
  726/ 1E0 : 5C                         	ret
  727/ 1E1 :                            ;
  728/ 1E1 :                            ;//  文字列出力( P2 )ヌル終端.
  729/ 1E1 :                            ;puts()
  730/ 1E1 :                            ;{
  731/ 1E1 :                            puts:
  732/ 1E1 :                            ;	do {
  733/ 1E1 :                            __do025:
  734/ 1E1 :                            ;		a=*p2++;
  735/ 1E1 : C6 01                      	ld	a, @1,p2
  736/ 1E3 :                            ;		if(a==0) break;
  737/ 1E3 : 6C 05                      	bz	__od025
  738/ 1E5 :                            ;		putc();
  739/ 1E5 : 20 08 00                   	jsr	putc
  740/ 1E8 :                            ;	}while(1);	
  741/ 1E8 : 74 F7                      	bra	__do025
  742/ 1EA :                            __od025:
  743/ 1EA :                            ;}
  744/ 1EA : 5C                         	ret
  745/ 1EB :                            ;
  746/ 1EB :                            ;//  文字列入力( P2 ) 0x0a + ヌル終端.
  747/ 1EB :                            ;gets()
  748/ 1EB :                            ;{
  749/ 1EB :                            gets:
  750/ 1EB :                            ;	do {
  751/ 1EB :                            __do026:
  752/ 1EB :                            ;		getc();
  753/ 1EB : 20 06 00                   	jsr	getc
  754/ 1EE :                            ;		*p2++=a;
  755/ 1EE : CE 01                      	st	a, @1,p2
  756/ 1F0 :                            ;		e=a;
  757/ 1F0 : 48                         	ld	e,a
  758/ 1F1 :                            ;		if(e==0x0a) break;
  759/ 1F1 : 40                         	ld	a,e
  760/ 1F2 : FC 0A                      	sub	a, =0x0a
  761/ 1F4 : 6C 07                      	bz	__od026
  762/ 1F6 :                            ;		if(e==0x0d) break;
  763/ 1F6 : 40                         	ld	a,e
  764/ 1F7 : FC 0D                      	sub	a, =0x0d
  765/ 1F9 : 6C 02                      	bz	__od026
  766/ 1FB :                            ;	}while(1);	
  767/ 1FB : 74 EE                      	bra	__do026
  768/ 1FD :                            __od026:
  769/ 1FD :                            ;
  770/ 1FD :                            ;	a=0; *p2++=a;
  771/ 1FD : C4 00                      	ld	a, =0
  772/ 1FF : CE 01                      	st	a, @1,p2
  773/ 201 :                            ;}
  774/ 201 : 5C                         	ret
  775/ 202 :                            ;
  776/ 202 :                            ;//  文字列サンプル
  777/ 202 :                            ;msg1:
  778/ 202 :                            msg1:
  779/ 202 :                            ;	db(" * SC/MP-III Monitor *");
  780/ 202 : 20 2A 20 53 43 2F 4D 50 2D 	db	" * SC/MP-III Monitor *"
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 14 - 2025年01月23日 14時38分38秒


       20B : 49 49 49 20 4D 6F 6E 69 74
       214 : 6F 72 20 2A               
  781/ 218 :                            ;	db(0x0d);
  782/ 218 : 0D                         	db	0x0d
  783/ 219 :                            ;	db(0x0a);
  784/ 219 : 0A                         	db	0x0a
  785/ 21A :                            ;	db(0);
  786/ 21A : 00                         	db	0
  787/ 21B :                            ;
  788/ 21B :                            ;inbuf:
  789/ 21B :                            inbuf:
  790/ 21B :                            ;	ds(128);
  791/ 21B :                            	ds	128
  792/ 29B :                            ;
  793/ 29B :                            ;bufend:
  794/ 29B :                            bufend:
  795/ 29B :                            ;	db(0);
  796/ 29B : 00                         	db	0
  797/ 29C :                            ;
  798/ 29C :                            ;// =============  ここから、円周率計算 ===============
  799/ 29C :                            ;//
  800/ 29C :                            ;//
  801/ 29C :                            ;PI_MSG_1:
  802/ 29C :                            PI_MSG_1:
  803/ 29C :                            ;	db(0x0d);
  804/ 29C : 0D                         	db	0x0d
  805/ 29D :                            ;	db(0x0a);
  806/ 29D : 0A                         	db	0x0a
  807/ 29E :                            ;	db("> Calculating PI ... ");
  808/ 29E : 3E 20 43 61 6C 63 75 6C 61 	db	"> Calculating PI ... "
       2A7 : 74 69 6E 67 20 50 49 20 2E
       2B0 : 2E 2E 20                  
  809/ 2B3 :                            ;	db(0x0d);
  810/ 2B3 : 0D                         	db	0x0d
  811/ 2B4 :                            ;	db(0x0a);
  812/ 2B4 : 0A                         	db	0x0a
  813/ 2B5 :                            ;	db(0);
  814/ 2B5 : 00                         	db	0
  815/ 2B6 :                            ;
  816/ 2B6 :                            ;PI_EQU_1:
  817/ 2B6 :                            PI_EQU_1:
  818/ 2B6 :                            ;	db("PI = ");
  819/ 2B6 : 50 49 20 3D 20             	db	"PI = "
  820/ 2BB :                            ;	db(0);
  821/ 2BB : 00                         	db	0
  822/ 2BC :                            ;
  823/ 2BC :                            ;PI_EQU_2:
  824/ 2BC :                            PI_EQU_2:
  825/ 2BC :                            ;	db(" + ");
  826/ 2BC : 20 2B 20                   	db	" + "
  827/ 2BF :                            ;	db(0x0d);
  828/ 2BF : 0D                         	db	0x0d
  829/ 2C0 :                            ;	db(0x0a);
  830/ 2C0 : 0A                         	db	0x0a
  831/ 2C1 :                            ;	db(0);
  832/ 2C1 : 00                         	db	0
  833/ 2C2 :                            ;
  834/ 2C2 :                            ;// 割り算=========
  835/ 2C2 :                            ;// q0/q4
  836/ 2C2 :                            ;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 15 - 2025年01月23日 14時38分38秒


  837/ 2C2 :                            ;div32_16()
  838/ 2C2 :                            ;{
  839/ 2C2 :                            div32_16:
  840/ 2C2 :                            ;	cyr0=0;
  841/ 2C2 : C4 00                      	ld	a, =0
  842/ 2C4 : CD B0                      	st	a,cyr0
  843/ 2C6 :                            ;	cyr1=0;
  844/ 2C6 : C4 00                      	ld	a, =0
  845/ 2C8 : CD B1                      	st	a,cyr1
  846/ 2CA :                            ;	cyr2=0;
  847/ 2CA : C4 00                      	ld	a, =0
  848/ 2CC : CD B2                      	st	a,cyr2
  849/ 2CE :                            ;
  850/ 2CE :                            ;	divcnt=16;
  851/ 2CE : C4 10                      	ld	a, =16
  852/ 2D0 : CD C4                      	st	a,divcnt
  853/ 2D2 :                            ;	do {
  854/ 2D2 :                            __do027:
  855/ 2D2 :                            ;
  856/ 2D2 :                            ;// === q0:q3 の32bit を左シフト(2倍)
  857/ 2D2 :                            ;		// q0 <<=1
  858/ 2D2 :                            ;		ea=q0;ea+=q0;
  859/ 2D2 : 85 A0                      	ld	ea,q0
  860/ 2D4 : B5 A0                      	add	ea,q0
  861/ 2D6 :                            ;		q0=ea;
  862/ 2D6 : 8D A0                      	st	ea,q0
  863/ 2D8 :                            ;
  864/ 2D8 :                            ;		// sr = CY(bit7) CYをcyr1:cyr2に整数値(0 or 1)で保管.
  865/ 2D8 :                            ;		e=0;
  866/ 2D8 : 01                         	xch	e,a
  867/ 2D9 : C4 00                      	ld	a, =0
  868/ 2DB : 01                         	xch	e,a
  869/ 2DC :                            ;		a=s;sl(ea);cyr0=ea;
  870/ 2DC : 06                         	ld	a,s
  871/ 2DD : 0F                         	sl	ea
  872/ 2DE : 8D B0                      	st	ea,cyr0
  873/ 2E0 :                            ;
  874/ 2E0 :                            ;		// q2 <<=1 : q2+= .CY
  875/ 2E0 :                            ;		ea=q2;ea+=q2;ea+=cyr1;
  876/ 2E0 : 85 A2                      	ld	ea,q2
  877/ 2E2 : B5 A2                      	add	ea,q2
  878/ 2E4 : B5 B1                      	add	ea,cyr1
  879/ 2E6 :                            ;		q2=ea;
  880/ 2E6 : 8D A2                      	st	ea,q2
  881/ 2E8 :                            ;// === q2:q3 の16bit から q4:q5の16bit が減算できるなら減算する.
  882/ 2E8 :                            ;		ea-=q4;push(ea);
  883/ 2E8 : BD A4                      	sub	ea,q4
  884/ 2EA : 08                         	push	ea
  885/ 2EB :                            ;		a=e;if(a>=0) {
  886/ 2EB : 40                         	ld	a,e
  887/ 2EC : FC 00                      	sub	a, =0
  888/ 2EE : 64 02                      	bp	$+4
  889/ 2F0 : 74 0D                      	bra	__el028
  890/ 2F2 :                            ;			pop(ea);
  891/ 2F2 : 3A                         	pop	ea
  892/ 2F3 :                            ;			q2=ea; //減算結果をq2に書き戻す.
  893/ 2F3 : 8D A2                      	st	ea,q2
  894/ 2F5 :                            ;			// q0++
  895/ 2F5 :                            ;			ea=q0;ea+=1;q0=ea;
  896/ 2F5 : 85 A0                      	ld	ea,q0
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 16 - 2025年01月23日 14時38分38秒


  897/ 2F7 : B4 01 00                   	add	ea, =1
  898/ 2FA : 8D A0                      	st	ea,q0
  899/ 2FC :                            ;		}else{
  900/ 2FC : 24 FF 02                   	jmp	__fi028
  901/ 2FF :                            __el028:
  902/ 2FF :                            ;			pop(ea);//減算結果を破棄する.
  903/ 2FF : 3A                         	pop	ea
  904/ 300 :                            ;		}
  905/ 300 :                            __fi028:
  906/ 300 :                            ;	}while(--divcnt);
  907/ 300 : 9D C4                      	dld	A,divcnt
  908/ 302 : 7C CE                      	bnz	__do027
  909/ 304 :                            __od027:
  910/ 304 :                            ;}
  911/ 304 : 5C                         	ret
  912/ 305 :                            ;
  913/ 305 :                            ;// 割り算テスト
  914/ 305 :                            ;div_test()
  915/ 305 :                            ;{
  916/ 305 :                            div_test:
  917/ 305 :                            ;	// q0 = 12345
  918/ 305 :                            ;	ea=12345;q0=ea;
  919/ 305 : 84 39 30                   	ld	ea, =12345
  920/ 308 : 8D A0                      	st	ea,q0
  921/ 30A :                            ;	ea=0    ;q2=ea;
  922/ 30A : 84 00 00                   	ld	ea, =0
  923/ 30D : 8D A2                      	st	ea,q2
  924/ 30F :                            ;
  925/ 30F :                            ;	// q4 = 10
  926/ 30F :                            ;	ea=10   ;q4=ea;
  927/ 30F : 84 0A 00                   	ld	ea, =10
  928/ 312 : 8D A4                      	st	ea,q4
  929/ 314 :                            ;
  930/ 314 :                            ;	// q0/q4
  931/ 314 :                            ;	div32_16();
  932/ 314 : 20 C1 02                   	jsr	div32_16
  933/ 317 :                            ;
  934/ 317 :                            ;	p2=#q0;mdump(); //メモリーダンプの実行.
  935/ 317 : 26 A0 FF                   	ld	p2, =q0
  936/ 31A : 20 56 01                   	jsr	mdump
  937/ 31D :                            ;}
  938/ 31D : 5C                         	ret
  939/ 31E :                            ;
  940/ 31E :                            ;mp_set()
  941/ 31E :                            ;{
  942/ 31E :                            mp_set:
  943/ 31E :                            ;	e=a;
  944/ 31E : 48                         	ld	e,a
  945/ 31F :                            ;	*p2++ = 0;
  946/ 31F : C4 00                      	ld	a, =0
  947/ 321 : CE 01                      	st	a, @1,p2
  948/ 323 :                            ;	a=e;
  949/ 323 : 40                         	ld	a,e
  950/ 324 :                            ;	*p2++ = a;
  951/ 324 : CE 01                      	st	a, @1,p2
  952/ 326 :                            ;
  953/ 326 :                            ;	ea=#PRECISION;cnt1=ea;
  954/ 326 : 84 88 13                   	ld	ea, =PRECISION
  955/ 329 : 8D 81                      	st	ea,cnt1
  956/ 32B :                            ;	do {
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 17 - 2025年01月23日 14時38分38秒


  957/ 32B :                            __do029:
  958/ 32B :                            ;		*p2++ = 0;
  959/ 32B : C4 00                      	ld	a, =0
  960/ 32D : CE 01                      	st	a, @1,p2
  961/ 32F :                            ;		dec_w(cnt1);
  962/ 32F : (MACRO)                    	dec_w	cnt1
  962/ 32F : 85 81                              ld ea,CNT1
  962/ 331 : BC 01 00                           sub ea, =1
  962/ 334 : 8D 81                              st ea,CNT1
  962/ 336 :                                    
  962/ 336 : 58                                 or a,e
  962/ 337 :                            
  963/ 337 :                            ;	}while(a!=0);
  964/ 337 : 7C F2                      	bnz	__do029
  965/ 339 :                            __od029:
  966/ 339 :                            ;}
  967/ 339 : 5C                         	ret
  968/ 33A :                            ;
  969/ 33A :                            ;mp_zerochk()
  970/ 33A :                            ;{
  971/ 33A :                            mp_zerochk:
  972/ 33A :                            ;	ea=#PRECISION; ea-=10; cnt1=ea;
  973/ 33A : 84 88 13                   	ld	ea, =PRECISION
  974/ 33D : BC 0A 00                   	sub	ea, =10
  975/ 340 : 8D 81                      	st	ea,cnt1
  976/ 342 :                            ;	do {
  977/ 342 :                            __do030:
  978/ 342 :                            ;		a = *p2++;
  979/ 342 : C6 01                      	ld	a, @1,p2
  980/ 344 :                            ;		if(a!=0) {
  981/ 344 : 6C 01                      	bz	__el031
  982/ 346 :                            ;			return;
  983/ 346 : 5C                         	ret
  984/ 347 :                            ;		}
  985/ 347 :                            ;		dec_w(cnt1);
  986/ 347 :                            __el031:
  987/ 347 : (MACRO)                    	dec_w	cnt1
  987/ 347 : 85 81                              ld ea,CNT1
  987/ 349 : BC 01 00                           sub ea, =1
  987/ 34C : 8D 81                              st ea,CNT1
  987/ 34E :                                    
  987/ 34E : 58                                 or a,e
  987/ 34F :                            
  988/ 34F :                            ;	}while(a!=0);
  989/ 34F : 7C F1                      	bnz	__do030
  990/ 351 :                            __od030:
  991/ 351 :                            ;	a=0; // Zero判定!
  992/ 351 : C4 00                      	ld	a, =0
  993/ 353 :                            ;}
  994/ 353 : 5C                         	ret
  995/ 354 :                            ;
  996/ 354 :                            ;mp_copy()
  997/ 354 :                            ;{
  998/ 354 :                            mp_copy:
  999/ 354 :                            ;	ea=#PRECISION;cnt1=ea;
 1000/ 354 : 84 88 13                   	ld	ea, =PRECISION
 1001/ 357 : 8D 81                      	st	ea,cnt1
 1002/ 359 :                            ;	do {
 1003/ 359 :                            __do032:
 1004/ 359 :                            ;		a = *p3++;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 18 - 2025年01月23日 14時38分38秒


 1005/ 359 : C7 01                      	ld	a, @1,p3
 1006/ 35B :                            ;		    *p2++ = a;
 1007/ 35B : CE 01                      	st	a, @1,p2
 1008/ 35D :                            ;		dec_w(cnt1);
 1009/ 35D : (MACRO)                    	dec_w	cnt1
 1009/ 35D : 85 81                              ld ea,CNT1
 1009/ 35F : BC 01 00                           sub ea, =1
 1009/ 362 : 8D 81                              st ea,CNT1
 1009/ 364 :                                    
 1009/ 364 : 58                                 or a,e
 1009/ 365 :                            
 1010/ 365 :                            ;	}while(a!=0);
 1011/ 365 : 7C F2                      	bnz	__do032
 1012/ 367 :                            __od032:
 1013/ 367 :                            ;}
 1014/ 367 : 5C                         	ret
 1015/ 368 :                            ;
 1016/ 368 :                            ;p2_dump()
 1017/ 368 :                            ;{
 1018/ 368 :                            p2_dump:
 1019/ 368 :                            ;	putc();
 1020/ 368 : 20 08 00                   	jsr	putc
 1021/ 36B :                            ;	a=':';putc();
 1022/ 36B : C4 3A                      	ld	a, =':'
 1023/ 36D : 20 08 00                   	jsr	putc
 1024/ 370 :                            ;
 1025/ 370 :                            ;	mdump_8();
 1026/ 370 : 20 7D 01                   	jsr	mdump_8
 1027/ 373 :                            ;	put_crlf();
 1028/ 373 : 20 D5 01                   	jsr	put_crlf
 1029/ 376 :                            ;}
 1030/ 376 : 5C                         	ret
 1031/ 377 :                            ;
 1032/ 377 :                            ;q0_dump()
 1033/ 377 :                            ;{
 1034/ 377 :                            q0_dump:
 1035/ 377 :                            ;	push(p2);
 1036/ 377 : 56                         	push	p2
 1037/ 378 :                            ;	p2=#q0;p2_dump();
 1038/ 378 : 26 A0 FF                   	ld	p2, =q0
 1039/ 37B : 20 67 03                   	jsr	p2_dump
 1040/ 37E :                            ;	pop(p2);
 1041/ 37E : 5E                         	pop	p2
 1042/ 37F :                            ;}
 1043/ 37F : 5C                         	ret
 1044/ 380 :                            ;
 1045/ 380 :                            ;pi_dump()
 1046/ 380 :                            ;{
 1047/ 380 :                            pi_dump:
 1048/ 380 :                            ;	push(p2);
 1049/ 380 : 56                         	push	p2
 1050/ 381 :                            ;	p2=#Pi;p2_dump();
 1051/ 381 : 26 21 06                   	ld	p2, =Pi
 1052/ 384 : 20 67 03                   	jsr	p2_dump
 1053/ 387 :                            ;	pop(p2);
 1054/ 387 : 5E                         	pop	p2
 1055/ 388 :                            ;}
 1056/ 388 : 5C                         	ret
 1057/ 389 :                            ;
 1058/ 389 :                            ;ma_dump()
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 19 - 2025年01月23日 14時38分38秒


 1059/ 389 :                            ;{
 1060/ 389 :                            ma_dump:
 1061/ 389 :                            ;	push(p2);
 1062/ 389 : 56                         	push	p2
 1063/ 38A :                            ;	p2=#ma;p2_dump();
 1064/ 38A : 26 AB 19                   	ld	p2, =ma
 1065/ 38D : 20 67 03                   	jsr	p2_dump
 1066/ 390 :                            ;	pop(p2);
 1067/ 390 : 5E                         	pop	p2
 1068/ 391 :                            ;}
 1069/ 391 : 5C                         	ret
 1070/ 392 :                            ;
 1071/ 392 :                            ;mb_dump()
 1072/ 392 :                            ;{
 1073/ 392 :                            mb_dump:
 1074/ 392 :                            ;	push(p2);
 1075/ 392 : 56                         	push	p2
 1076/ 393 :                            ;	p2=#mb;p2_dump();
 1077/ 393 : 26 35 2D                   	ld	p2, =mb
 1078/ 396 : 20 67 03                   	jsr	p2_dump
 1079/ 399 :                            ;	pop(p2);
 1080/ 399 : 5E                         	pop	p2
 1081/ 39A :                            ;}
 1082/ 39A : 5C                         	ret
 1083/ 39B :                            ;
 1084/ 39B :                            ;mc_dump()
 1085/ 39B :                            ;{
 1086/ 39B :                            mc_dump:
 1087/ 39B :                            ;	push(p2);
 1088/ 39B : 56                         	push	p2
 1089/ 39C :                            ;	p2=#mc;p2_dump();
 1090/ 39C : 26 BF 40                   	ld	p2, =mc
 1091/ 39F : 20 67 03                   	jsr	p2_dump
 1092/ 3A2 :                            ;	pop(p2);
 1093/ 3A2 : 5E                         	pop	p2
 1094/ 3A3 :                            ;}
 1095/ 3A3 : 5C                         	ret
 1096/ 3A4 :                            ;
 1097/ 3A4 :                            ;/**********************************************************************
 1098/ 3A4 :                            ; *  p2 配列 を 整数 reg_ea で除算する
 1099/ 3A4 :                            ; **********************************************************************
 1100/ 3A4 :                            ; * mp_div(MP *p2,int ea)
 1101/ 3A4 :                            ; */
 1102/ 3A4 :                            ;mp_div()
 1103/ 3A4 :                            ;{
 1104/ 3A4 :                            mp_div:
 1105/ 3A4 :                            ;	q4=ea; // q4:q5 = 除数.
 1106/ 3A4 : 8D A4                      	st	ea,q4
 1107/ 3A6 :                            ;	ea=0;q2=ea;
 1108/ 3A6 : 84 00 00                   	ld	ea, =0
 1109/ 3A9 : 8D A2                      	st	ea,q2
 1110/ 3AB :                            ;	e=0;
 1111/ 3AB : 01                         	xch	e,a
 1112/ 3AC : C4 00                      	ld	a, =0
 1113/ 3AE : 01                         	xch	e,a
 1114/ 3AF :                            ;
 1115/ 3AF :                            ;	ea=#PRECISION;ea>>=1;
 1116/ 3AF : 84 88 13                   	ld	ea, =PRECISION
 1117/ 3B2 : 0C                         	sr	ea
 1118/ 3B3 :                            ;	cnt1=ea;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 20 - 2025年01月23日 14時38分38秒


 1119/ 3B3 : 8D 81                      	st	ea,cnt1
 1120/ 3B5 :                            ;	do {
 1121/ 3B5 :                            __do033:
 1122/ 3B5 :                            ;		a = p2[0];e=a;
 1123/ 3B5 : C2 00                      	ld	a,0,p2
 1124/ 3B7 : 48                         	ld	e,a
 1125/ 3B8 :                            ;		a = p2[1];
 1126/ 3B8 : C2 01                      	ld	a,1,p2
 1127/ 3BA :                            ;		q0=ea; // q0:q3= 被除数.
 1128/ 3BA : 8D A0                      	st	ea,q0
 1129/ 3BC :                            ;		div32_16();
 1130/ 3BC : 20 C1 02                   	jsr	div32_16
 1131/ 3BF :                            ;
 1132/ 3BF :                            ;		// q0:q1 = 商
 1133/ 3BF :                            ;		ea=q0;
 1134/ 3BF : 85 A0                      	ld	ea,q0
 1135/ 3C1 :                            ;		p2[1]=a; a=e;
 1136/ 3C1 : CA 01                      	st	a,1,p2
 1137/ 3C3 : 40                         	ld	a,e
 1138/ 3C4 :                            ;		p2[0]=a;	
 1139/ 3C4 : CA 00                      	st	a,0,p2
 1140/ 3C6 :                            ;		// q2:q3 = 剰余(次のループで65536倍して再利用)
 1141/ 3C6 :                            ;
 1142/ 3C6 :                            ;		//ポインタを2バイト進める
 1143/ 3C6 :                            ;		ld(a,@2,p2);
 1144/ 3C6 : C6 02                      	ld	a,@2,p2
 1145/ 3C8 :                            ;
 1146/ 3C8 :                            ;		dec_w(cnt1);
 1147/ 3C8 : (MACRO)                    	dec_w	cnt1
 1147/ 3C8 : 85 81                              ld ea,CNT1
 1147/ 3CA : BC 01 00                           sub ea, =1
 1147/ 3CD : 8D 81                              st ea,CNT1
 1147/ 3CF :                                    
 1147/ 3CF : 58                                 or a,e
 1147/ 3D0 :                            
 1148/ 3D0 :                            ;	}while(a!=0);
 1149/ 3D0 : 7C E3                      	bnz	__do033
 1150/ 3D2 :                            __od033:
 1151/ 3D2 :                            ;}
 1152/ 3D2 : 5C                         	ret
 1153/ 3D3 :                            ;
 1154/ 3D3 :                            ;p2_last()
 1155/ 3D3 :                            ;{
 1156/ 3D3 :                            p2_last:
 1157/ 3D3 :                            ;	ea=p2;
 1158/ 3D3 : 32                         	ld	ea,p2
 1159/ 3D4 :                            ;	ea+=#PRECISION;
 1160/ 3D4 : B4 88 13                   	add	ea, =PRECISION
 1161/ 3D7 :                            ;	ea-=1;
 1162/ 3D7 : BC 01 00                   	sub	ea, =1
 1163/ 3DA :                            ;	p2=ea;
 1164/ 3DA : 46                         	ld	p2,ea
 1165/ 3DB :                            ;}
 1166/ 3DB : 5C                         	ret
 1167/ 3DC :                            ;p3_last()
 1168/ 3DC :                            ;{
 1169/ 3DC :                            p3_last:
 1170/ 3DC :                            ;	ea=p3;
 1171/ 3DC : 33                         	ld	ea,p3
 1172/ 3DD :                            ;	ea+=#PRECISION;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 21 - 2025年01月23日 14時38分38秒


 1173/ 3DD : B4 88 13                   	add	ea, =PRECISION
 1174/ 3E0 :                            ;	ea-=1;
 1175/ 3E0 : BC 01 00                   	sub	ea, =1
 1176/ 3E3 :                            ;	p3=ea;
 1177/ 3E3 : 47                         	ld	p3,ea
 1178/ 3E4 :                            ;}
 1179/ 3E4 : 5C                         	ret
 1180/ 3E5 :                            ;/**********************************************************************
 1181/ 3E5 :                            ; *	多倍長減算： p2 = p2 - p3
 1182/ 3E5 :                            ; **********************************************************************
 1183/ 3E5 :                            ; *   mp_add(p2 += p3)
 1184/ 3E5 :                            ; */
 1185/ 3E5 :                            ;mp_add()
 1186/ 3E5 :                            ;{
 1187/ 3E5 :                            mp_add:
 1188/ 3E5 :                            ;	p2_last();
 1189/ 3E5 : 20 D2 03                   	jsr	p2_last
 1190/ 3E8 :                            ;	p3_last();
 1191/ 3E8 : 20 DB 03                   	jsr	p3_last
 1192/ 3EB :                            ;
 1193/ 3EB :                            ;	cyr1=0;	// CY
 1194/ 3EB : C4 00                      	ld	a, =0
 1195/ 3ED : CD B1                      	st	a,cyr1
 1196/ 3EF :                            ;	cyr2=0;
 1197/ 3EF : C4 00                      	ld	a, =0
 1198/ 3F1 : CD B2                      	st	a,cyr2
 1199/ 3F3 :                            ;
 1200/ 3F3 :                            ;	r0 = 0;
 1201/ 3F3 : C4 00                      	ld	a, =0
 1202/ 3F5 : CD A8                      	st	a,r0
 1203/ 3F7 :                            ;	r1 = 0;
 1204/ 3F7 : C4 00                      	ld	a, =0
 1205/ 3F9 : CD AA                      	st	a,r1
 1206/ 3FB :                            ;	r2 = 0;
 1207/ 3FB : C4 00                      	ld	a, =0
 1208/ 3FD : CD AC                      	st	a,r2
 1209/ 3FF :                            ;	r3 = 0;
 1210/ 3FF : C4 00                      	ld	a, =0
 1211/ 401 : CD AE                      	st	a,r3
 1212/ 403 :                            ;
 1213/ 403 :                            ;	ea=#PRECISION;cnt1=ea;
 1214/ 403 : 84 88 13                   	ld	ea, =PRECISION
 1215/ 406 : 8D 81                      	st	ea,cnt1
 1216/ 408 :                            ;	do {
 1217/ 408 :                            __do034:
 1218/ 408 :                            ;		// p2[0] -= p3[0];
 1219/ 408 :                            ;		a = *p2; r0 = a;
 1220/ 408 : C2 00                      	ld	a, 0,p2
 1221/ 40A : CD A8                      	st	a,r0
 1222/ 40C :                            ;		a = *p3; r2 = a;
 1223/ 40C : C3 00                      	ld	a, 0,p3
 1224/ 40E : CD AC                      	st	a,r2
 1225/ 410 :                            ;
 1226/ 410 :                            ;		ea = r0;
 1227/ 410 : 85 A8                      	ld	ea,r0
 1228/ 412 :                            ;		ea +=r2;
 1229/ 412 : B5 AC                      	add	ea,r2
 1230/ 414 :                            ;		ea +=cyr1; // CY を含めて減算.
 1231/ 414 : B5 B1                      	add	ea,cyr1
 1232/ 416 :                            ;		*p2 = a;   // 減算結果8bit
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 22 - 2025年01月23日 14時38分38秒


 1233/ 416 : CA 00                      	st	a, 0,p2
 1234/ 418 :                            ;
 1235/ 418 :                            ;		// CYをcyr1:cyr2に整数値(0 or 1)で保管.
 1236/ 418 :                            ;		cyr1=0;
 1237/ 418 : C4 00                      	ld	a, =0
 1238/ 41A : CD B1                      	st	a,cyr1
 1239/ 41C :                            ;		a=e;if(a!=0) {cyr1=1;}
 1240/ 41C : 40                         	ld	a,e
 1241/ 41D : 6C 04                      	bz	__el035
 1242/ 41F : C4 01                      	ld	a, =1
 1243/ 421 : CD B1                      	st	a,cyr1
 1244/ 423 :                            ;
 1245/ 423 :                            ;		// p2++ p3++;
 1246/ 423 :                            ;		ld(a,@-1,p2);		
 1247/ 423 :                            __el035:
 1248/ 423 : C6 FF                      	ld	a,@-1,p2
 1249/ 425 :                            ;		ld(a,@-1,p3);		
 1250/ 425 : C7 FF                      	ld	a,@-1,p3
 1251/ 427 :                            ;
 1252/ 427 :                            ;		dec_w(cnt1);
 1253/ 427 : (MACRO)                    	dec_w	cnt1
 1253/ 427 : 85 81                              ld ea,CNT1
 1253/ 429 : BC 01 00                           sub ea, =1
 1253/ 42C : 8D 81                              st ea,CNT1
 1253/ 42E :                                    
 1253/ 42E : 58                                 or a,e
 1253/ 42F :                            
 1254/ 42F :                            ;	}while(a!=0);
 1255/ 42F : 7C D7                      	bnz	__do034
 1256/ 431 :                            __od034:
 1257/ 431 :                            ;}
 1258/ 431 : 5C                         	ret
 1259/ 432 :                            ;
 1260/ 432 :                            ;/**********************************************************************
 1261/ 432 :                            ; *	多倍長減算： p2 = p2 - p3
 1262/ 432 :                            ; **********************************************************************
 1263/ 432 :                            ; *   mp_sub(p2 -= p3)
 1264/ 432 :                            ; */
 1265/ 432 :                            ;mp_sub()
 1266/ 432 :                            ;{
 1267/ 432 :                            mp_sub:
 1268/ 432 :                            ;	p2_last();
 1269/ 432 : 20 D2 03                   	jsr	p2_last
 1270/ 435 :                            ;	p3_last();
 1271/ 435 : 20 DB 03                   	jsr	p3_last
 1272/ 438 :                            ;
 1273/ 438 :                            ;	cyr1=0;	// CY
 1274/ 438 : C4 00                      	ld	a, =0
 1275/ 43A : CD B1                      	st	a,cyr1
 1276/ 43C :                            ;	cyr2=0;
 1277/ 43C : C4 00                      	ld	a, =0
 1278/ 43E : CD B2                      	st	a,cyr2
 1279/ 440 :                            ;
 1280/ 440 :                            ;	r0 = 0;
 1281/ 440 : C4 00                      	ld	a, =0
 1282/ 442 : CD A8                      	st	a,r0
 1283/ 444 :                            ;	r1 = 0;
 1284/ 444 : C4 00                      	ld	a, =0
 1285/ 446 : CD AA                      	st	a,r1
 1286/ 448 :                            ;	r2 = 0;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 23 - 2025年01月23日 14時38分38秒


 1287/ 448 : C4 00                      	ld	a, =0
 1288/ 44A : CD AC                      	st	a,r2
 1289/ 44C :                            ;	r3 = 0;
 1290/ 44C : C4 00                      	ld	a, =0
 1291/ 44E : CD AE                      	st	a,r3
 1292/ 450 :                            ;
 1293/ 450 :                            ;	ea=#PRECISION;cnt1=ea;
 1294/ 450 : 84 88 13                   	ld	ea, =PRECISION
 1295/ 453 : 8D 81                      	st	ea,cnt1
 1296/ 455 :                            ;	do {
 1297/ 455 :                            __do036:
 1298/ 455 :                            ;		// p2[0] -= p3[0];
 1299/ 455 :                            ;		a = *p2; r0 = a;
 1300/ 455 : C2 00                      	ld	a, 0,p2
 1301/ 457 : CD A8                      	st	a,r0
 1302/ 459 :                            ;		a = *p3; r2 = a;
 1303/ 459 : C3 00                      	ld	a, 0,p3
 1304/ 45B : CD AC                      	st	a,r2
 1305/ 45D :                            ;
 1306/ 45D :                            ;		ea = r0;
 1307/ 45D : 85 A8                      	ld	ea,r0
 1308/ 45F :                            ;		ea -=r2;
 1309/ 45F : BD AC                      	sub	ea,r2
 1310/ 461 :                            ;		ea -=cyr1; // CY を含めて減算.
 1311/ 461 : BD B1                      	sub	ea,cyr1
 1312/ 463 :                            ;		*p2 = a;   // 減算結果8bit
 1313/ 463 : CA 00                      	st	a, 0,p2
 1314/ 465 :                            ;
 1315/ 465 :                            ;		// CYをcyr1:cyr2に整数値(0 or 1)で保管.
 1316/ 465 :                            ;		cyr1=0;
 1317/ 465 : C4 00                      	ld	a, =0
 1318/ 467 : CD B1                      	st	a,cyr1
 1319/ 469 :                            ;		a=e;if(a!=0) {cyr1=1;}
 1320/ 469 : 40                         	ld	a,e
 1321/ 46A : 6C 04                      	bz	__el037
 1322/ 46C : C4 01                      	ld	a, =1
 1323/ 46E : CD B1                      	st	a,cyr1
 1324/ 470 :                            ;
 1325/ 470 :                            ;		// p2-- p3--;
 1326/ 470 :                            ;		ld(a,@-1,p2);		
 1327/ 470 :                            __el037:
 1328/ 470 : C6 FF                      	ld	a,@-1,p2
 1329/ 472 :                            ;		ld(a,@-1,p3);		
 1330/ 472 : C7 FF                      	ld	a,@-1,p3
 1331/ 474 :                            ;
 1332/ 474 :                            ;		dec_w(cnt1);
 1333/ 474 : (MACRO)                    	dec_w	cnt1
 1333/ 474 : 85 81                              ld ea,CNT1
 1333/ 476 : BC 01 00                           sub ea, =1
 1333/ 479 : 8D 81                              st ea,CNT1
 1333/ 47B :                                    
 1333/ 47B : 58                                 or a,e
 1333/ 47C :                            
 1334/ 47C :                            ;	}while(a!=0);
 1335/ 47C : 7C D7                      	bnz	__do036
 1336/ 47E :                            __od036:
 1337/ 47E :                            ;}
 1338/ 47E : 5C                         	ret
 1339/ 47F :                            ;/**********************************************************************
 1340/ 47F :                            ; *  ea を 10倍する.
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 24 - 2025年01月23日 14時38分38秒


 1341/ 47F :                            ; **********************************************************************
 1342/ 47F :                            ; */
 1343/ 47F :                            ;ea_mul10()
 1344/ 47F :                            ;{
 1345/ 47F :                            ea_mul10:
 1346/ 47F :                            ;	// 乗算命令MPYはEAとTの内容を乗じて上位16 bitをEAに、下位16 bitをTに入れます。
 1347/ 47F :                            ;	// 演算は符号付きで行われます。
 1348/ 47F :                            ;	t=ea;
 1349/ 47F : 09                         	ld	t,ea
 1350/ 480 :                            ;	ea=10;mpy(ea,t);
 1351/ 480 : 84 0A 00                   	ld	ea, =10
 1352/ 483 : 2C                         	mpy	ea,t
 1353/ 484 :                            ;	ea=t;
 1354/ 484 : 0B                         	ld	ea,t
 1355/ 485 :                            ;}
 1356/ 485 : 5C                         	ret
 1357/ 486 :                            ;
 1358/ 486 :                            ;/**********************************************************************
 1359/ 486 :                            ; *  ea を 二乗する.
 1360/ 486 :                            ; **********************************************************************
 1361/ 486 :                            ; */
 1362/ 486 :                            ;ea_mul_ea()
 1363/ 486 :                            ;{
 1364/ 486 :                            ea_mul_ea:
 1365/ 486 :                            ;	// 乗算命令MPYはEAとTの内容を乗じて上位16 bitをEAに、下位16 bitをTに入れます。
 1366/ 486 :                            ;	// 演算は符号付きで行われます。
 1367/ 486 :                            ;	t=ea;
 1368/ 486 : 09                         	ld	t,ea
 1369/ 487 :                            ;		mpy(ea,t);
 1370/ 487 : 2C                         	mpy	ea,t
 1371/ 488 :                            ;	ea=t;
 1372/ 488 : 0B                         	ld	ea,t
 1373/ 489 :                            ;}
 1374/ 489 : 5C                         	ret
 1375/ 48A :                            ;
 1376/ 48A :                            ;
 1377/ 48A :                            ;/**********************************************************************
 1378/ 48A :                            ; *  m0 を 10倍する.
 1379/ 48A :                            ; **********************************************************************
 1380/ 48A :                            ; * mp_mul10(p2)
 1381/ 48A :                            ; */
 1382/ 48A :                            ;mp_mul10()
 1383/ 48A :                            ;{
 1384/ 48A :                            mp_mul10:
 1385/ 48A :                            ;	p2_last();
 1386/ 48A : 20 D2 03                   	jsr	p2_last
 1387/ 48D :                            ;
 1388/ 48D :                            ;	cyr0=0;
 1389/ 48D : C4 00                      	ld	a, =0
 1390/ 48F : CD B0                      	st	a,cyr0
 1391/ 491 :                            ;	cyr1=0;	// CY
 1392/ 491 : C4 00                      	ld	a, =0
 1393/ 493 : CD B1                      	st	a,cyr1
 1394/ 495 :                            ;	cyr2=0;
 1395/ 495 : C4 00                      	ld	a, =0
 1396/ 497 : CD B2                      	st	a,cyr2
 1397/ 499 :                            ;
 1398/ 499 :                            ;	r2 = 0;
 1399/ 499 : C4 00                      	ld	a, =0
 1400/ 49B : CD AC                      	st	a,r2
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 25 - 2025年01月23日 14時38分38秒


 1401/ 49D :                            ;	r3 = 0;
 1402/ 49D : C4 00                      	ld	a, =0
 1403/ 49F : CD AE                      	st	a,r3
 1404/ 4A1 :                            ;
 1405/ 4A1 :                            ;	ea=#PRECISION;cnt1=ea;
 1406/ 4A1 : 84 88 13                   	ld	ea, =PRECISION
 1407/ 4A4 : 8D 81                      	st	ea,cnt1
 1408/ 4A6 :                            ;	do {
 1409/ 4A6 :                            __do038:
 1410/ 4A6 :                            ;		a = *p2; r0 = a;
 1411/ 4A6 : C2 00                      	ld	a, 0,p2
 1412/ 4A8 : CD A8                      	st	a,r0
 1413/ 4AA :                            ;		a = 0;   r1 = a;
 1414/ 4AA : C4 00                      	ld	a, =0
 1415/ 4AC : CD AA                      	st	a,r1
 1416/ 4AE :                            ;		ea = r0; ea_mul10();ea+=r2;
 1417/ 4AE : 85 A8                      	ld	ea,r0
 1418/ 4B0 : 20 7E 04                   	jsr	ea_mul10
 1419/ 4B3 : B5 AC                      	add	ea,r2
 1420/ 4B5 :                            ;		*p2 = a;   	// 乗算結果8bit
 1421/ 4B5 : CA 00                      	st	a, 0,p2
 1422/ 4B7 :                            ;		
 1423/ 4B7 :                            ;		a=e;r2=a;  	// 8bitを越える分をr2に保管.
 1424/ 4B7 : 40                         	ld	a,e
 1425/ 4B8 : CD AC                      	st	a,r2
 1426/ 4BA :                            ;		a=0;r3=a;
 1427/ 4BA : C4 00                      	ld	a, =0
 1428/ 4BC : CD AE                      	st	a,r3
 1429/ 4BE :                            ;
 1430/ 4BE :                            ;		// p2--;
 1431/ 4BE :                            ;		ld(a,@-1,p2);		
 1432/ 4BE : C6 FF                      	ld	a,@-1,p2
 1433/ 4C0 :                            ;
 1434/ 4C0 :                            ;		dec_w(cnt1);
 1435/ 4C0 : (MACRO)                    	dec_w	cnt1
 1435/ 4C0 : 85 81                              ld ea,CNT1
 1435/ 4C2 : BC 01 00                           sub ea, =1
 1435/ 4C5 : 8D 81                              st ea,CNT1
 1435/ 4C7 :                                    
 1435/ 4C7 : 58                                 or a,e
 1435/ 4C8 :                            
 1436/ 4C8 :                            ;	}while(a!=0);
 1437/ 4C8 : 7C DC                      	bnz	__do038
 1438/ 4CA :                            __od038:
 1439/ 4CA :                            ;}
 1440/ 4CA : 5C                         	ret
 1441/ 4CB :                            ;
 1442/ 4CB :                            ;/**********************************************************************
 1443/ 4CB :                            ; *	mp を小数以下 (PRECISION*2+1) まで印字.
 1444/ 4CB :                            ; **********************************************************************
 1445/ 4CB :                            ; * void print_pi(MP *p)
 1446/ 4CB :                            ; */
 1447/ 4CB :                            ;print_pi()
 1448/ 4CB :                            ;{
 1449/ 4CB :                            print_pi:
 1450/ 4CB :                            ;	tab1=0;lf1=0;top1=0;
 1451/ 4CB : C4 00                      	ld	a, =0
 1452/ 4CD : CD BA                      	st	a,tab1
 1453/ 4CF : C4 00                      	ld	a, =0
 1454/ 4D1 : CD BB                      	st	a,lf1
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 26 - 2025年01月23日 14時38分38秒


 1455/ 4D3 : C4 00                      	ld	a, =0
 1456/ 4D5 : CD BD                      	st	a,top1
 1457/ 4D7 :                            ;	
 1458/ 4D7 :                            ;//	for(i=0;i< (PRECISION*2+1) ;i++) {
 1459/ 4D7 :                            ;
 1460/ 4D7 :                            ;	ea=#PRECISION;ea<<=1;ea+=1;
 1461/ 4D7 : 84 88 13                   	ld	ea, =PRECISION
 1462/ 4DA : 0F                         	sl	ea
 1463/ 4DB : B4 01 00                   	add	ea, =1
 1464/ 4DE :                            ;	cnt3=ea;
 1465/ 4DE : 8D B3                      	st	ea,cnt3
 1466/ 4E0 :                            ;	do {
 1467/ 4E0 :                            __do039:
 1468/ 4E0 :                            ;		//a='+';pi_dump();
 1469/ 4E0 :                            ;		ea=#Pi;p2=ea;
 1470/ 4E0 : 84 21 06                   	ld	ea, =Pi
 1471/ 4E3 : 46                         	ld	p2,ea
 1472/ 4E4 :                            ;		a=p2[1];chr1=a;
 1473/ 4E4 : C2 01                      	ld	a,1,p2
 1474/ 4E6 : CD BC                      	st	a,chr1
 1475/ 4E8 :                            ;		a=0;p2[0]=a;p2[1]=a;
 1476/ 4E8 : C4 00                      	ld	a, =0
 1477/ 4EA : CA 00                      	st	a,0,p2
 1478/ 4EC : CA 01                      	st	a,1,p2
 1479/ 4EE :                            ;		mp_mul10();
 1480/ 4EE : 20 89 04                   	jsr	mp_mul10
 1481/ 4F1 :                            ;		a=top1;if(a==0) {
 1482/ 4F1 : C5 BD                      	ld	a,top1
 1483/ 4F3 : 7C 1C                      	bnz	__el040
 1484/ 4F5 :                            ;			top1=1;
 1485/ 4F5 : C4 01                      	ld	a, =1
 1486/ 4F7 : CD BD                      	st	a,top1
 1487/ 4F9 :                            ;//			printf("PI = %c. + \n",'0'+c);
 1488/ 4F9 :                            ;			push(p2);
 1489/ 4F9 : 56                         	push	p2
 1490/ 4FA :                            ;			p2=#PI_EQU_1; puts();
 1491/ 4FA : 26 B6 02                   	ld	p2, =PI_EQU_1
 1492/ 4FD : 20 E0 01                   	jsr	puts
 1493/ 500 :                            ;			a=chr1;a+='0';putc();
 1494/ 500 : C5 BC                      	ld	a,chr1
 1495/ 502 : F4 30                      	add	a, ='0'
 1496/ 504 : 20 08 00                   	jsr	putc
 1497/ 507 :                            ;			p2=#PI_EQU_2; puts();
 1498/ 507 : 26 BC 02                   	ld	p2, =PI_EQU_2
 1499/ 50A : 20 E0 01                   	jsr	puts
 1500/ 50D :                            ;			pop(p2);
 1501/ 50D : 5E                         	pop	p2
 1502/ 50E :                            ;		}else{
 1503/ 50E : 24 37 05                   	jmp	__fi040
 1504/ 511 :                            __el040:
 1505/ 511 :                            ;			a=chr1;a+='0';putc();
 1506/ 511 : C5 BC                      	ld	a,chr1
 1507/ 513 : F4 30                      	add	a, ='0'
 1508/ 515 : 20 08 00                   	jsr	putc
 1509/ 518 :                            ;			ild(a,tab1);  // tab1++;
 1510/ 518 : 95 BA                      	ild	a,tab1
 1511/ 51A :                            ;			if(a>=10) {tab1=0;
 1512/ 51A : FC 0A                      	sub	a, =10
 1513/ 51C : 64 02                      	bp	$+4
 1514/ 51E : 74 18                      	bra	__el041
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 27 - 2025年01月23日 14時38分38秒


 1515/ 520 : C4 00                      	ld	a, =0
 1516/ 522 : CD BA                      	st	a,tab1
 1517/ 524 :                            ;				a=' ';putc();
 1518/ 524 : C4 20                      	ld	a, =' '
 1519/ 526 : 20 08 00                   	jsr	putc
 1520/ 529 :                            ;				ild(a,lf1);  // tab1++;
 1521/ 529 : 95 BB                      	ild	a,lf1
 1522/ 52B :                            ;				if(a>=5) {lf1=0;
 1523/ 52B : FC 05                      	sub	a, =5
 1524/ 52D : 64 02                      	bp	$+4
 1525/ 52F : 74 07                      	bra	__el042
 1526/ 531 : C4 00                      	ld	a, =0
 1527/ 533 : CD BB                      	st	a,lf1
 1528/ 535 :                            ;					put_crlf();
 1529/ 535 : 20 D5 01                   	jsr	put_crlf
 1530/ 538 :                            ;				}
 1531/ 538 :                            ;			}
 1532/ 538 :                            __el042:
 1533/ 538 :                            ;		}
 1534/ 538 :                            __el041:
 1535/ 538 :                            __fi040:
 1536/ 538 :                            ;		dec_w(cnt3);
 1537/ 538 : (MACRO)                    	dec_w	cnt3
 1537/ 538 : 85 B3                              ld ea,CNT3
 1537/ 53A : BC 01 00                           sub ea, =1
 1537/ 53D : 8D B3                              st ea,CNT3
 1537/ 53F :                                    
 1537/ 53F : 58                                 or a,e
 1537/ 540 :                            
 1538/ 540 :                            ;	}while(a!=0);
 1539/ 540 : 7C 9E                      	bnz	__do039
 1540/ 542 :                            __od039:
 1541/ 542 :                            ;
 1542/ 542 :                            ;	put_crlf();
 1543/ 542 : 20 D5 01                   	jsr	put_crlf
 1544/ 545 :                            ;}
 1545/ 545 : 5C                         	ret
 1546/ 546 :                            ;
 1547/ 546 :                            ;/**********************************************************************
 1548/ 546 :                            ; *  ひとつのArcTan項を計算する ma = m * atan(1/n)
 1549/ 546 :                            ; **********************************************************************
 1550/ 546 :                            ;    void calc_M_atan_1_N(int m1,int n1)
 1551/ 546 :                            ; */
 1552/ 546 :                            ;calc_M_atan_1_N()
 1553/ 546 :                            ;{
 1554/ 546 :                            calc_M_atan_1_N:
 1555/ 546 :                            ;// n_2 = n1*n1
 1556/ 546 :                            ;	e=0;a=n1; ea_mul_ea(); n_2=ea;
 1557/ 546 : 01                         	xch	e,a
 1558/ 547 : C4 00                      	ld	a, =0
 1559/ 549 : 01                         	xch	e,a
 1560/ 54A : C5 B8                      	ld	a,n1
 1561/ 54C : 20 85 04                   	jsr	ea_mul_ea
 1562/ 54F : 8D C2                      	st	ea,n_2
 1563/ 551 :                            ;	// p2=#n_2; a='*';p2_dump();
 1564/ 551 :                            ;
 1565/ 551 :                            ;// ma = m * (1/n)
 1566/ 551 :                            ;	p2=#ma ; e=0;a=m1  ; mp_set();
 1567/ 551 : 26 AB 19                   	ld	p2, =ma
 1568/ 554 : 01                         	xch	e,a
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 28 - 2025年01月23日 14時38分38秒


 1569/ 555 : C4 00                      	ld	a, =0
 1570/ 557 : 01                         	xch	e,a
 1571/ 558 : C5 B6                      	ld	a,m1
 1572/ 55A : 20 1D 03                   	jsr	mp_set
 1573/ 55D :                            ;	p2=#ma ; e=0;a=n1  ; mp_div();
 1574/ 55D : 26 AB 19                   	ld	p2, =ma
 1575/ 560 : 01                         	xch	e,a
 1576/ 561 : C4 00                      	ld	a, =0
 1577/ 563 : 01                         	xch	e,a
 1578/ 564 : C5 B8                      	ld	a,n1
 1579/ 566 : 20 A3 03                   	jsr	mp_div
 1580/ 569 :                            ;
 1581/ 569 :                            ;// mc = m * (1/n)
 1582/ 569 :                            ;	p2=#mc ; p3=#ma    ; mp_copy();		//	mc = ma;
 1583/ 569 : 26 BF 40                   	ld	p2, =mc
 1584/ 56C : 27 AB 19                   	ld	p3, =ma
 1585/ 56F : 20 53 03                   	jsr	mp_copy
 1586/ 572 :                            ;
 1587/ 572 :                            ;// arctan(x) = x - (1/3)x**3 + (1/5)x**5 - (1/7)x**7 ・・・
 1588/ 572 :                            ;// LOOP: ma +-= mb
 1589/ 572 :                            ;
 1590/ 572 :                            ;	sign1=0;
 1591/ 572 : C4 00                      	ld	a, =0
 1592/ 574 : CD B9                      	st	a,sign1
 1593/ 576 :                            ;
 1594/ 576 :                            ;	ea=3;indx0=ea; // indx0 = 3,5,7,9,11, ...
 1595/ 576 : 84 03 00                   	ld	ea, =3
 1596/ 579 : 8D C0                      	st	ea,indx0
 1597/ 57B :                            ;	while(1) {
 1598/ 57B :                            __wh043:
 1599/ 57B :                            ;		// mc = mc*(1/n)*(1/n)
 1600/ 57B :                            ;		a=n_2;if(a==25) {
 1601/ 57B : C5 C2                      	ld	a,n_2
 1602/ 57D : FC 19                      	sub	a, =25
 1603/ 57F : 7C 0B                      	bnz	__el044
 1604/ 581 :                            ;			p2=#mc;	ea=n_2;   mp_div();			// mc = mc * (1/ (n*n) );
 1605/ 581 : 26 BF 40                   	ld	p2, =mc
 1606/ 584 : 85 C2                      	ld	ea,n_2
 1607/ 586 : 20 A3 03                   	jsr	mp_div
 1608/ 589 :                            ;		}else{
 1609/ 589 : 24 A3 05                   	jmp	__fi044
 1610/ 58C :                            __el044:
 1611/ 58C :                            ;			p2=#mc;	e=0;a=n1; mp_div();
 1612/ 58C : 26 BF 40                   	ld	p2, =mc
 1613/ 58F : 01                         	xch	e,a
 1614/ 590 : C4 00                      	ld	a, =0
 1615/ 592 : 01                         	xch	e,a
 1616/ 593 : C5 B8                      	ld	a,n1
 1617/ 595 : 20 A3 03                   	jsr	mp_div
 1618/ 598 :                            ;			p2=#mc;	e=0;a=n1; mp_div();
 1619/ 598 : 26 BF 40                   	ld	p2, =mc
 1620/ 59B : 01                         	xch	e,a
 1621/ 59C : C4 00                      	ld	a, =0
 1622/ 59E : 01                         	xch	e,a
 1623/ 59F : C5 B8                      	ld	a,n1
 1624/ 5A1 : 20 A3 03                   	jsr	mp_div
 1625/ 5A4 :                            ;		}
 1626/ 5A4 :                            __fi044:
 1627/ 5A4 :                            ;		// mb = mc*(1/i)
 1628/ 5A4 :                            ;		p2=#mb ; p3=#mc ; mp_copy();		//	mb = mc;
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 29 - 2025年01月23日 14時38分38秒


 1629/ 5A4 : 26 35 2D                   	ld	p2, =mb
 1630/ 5A7 : 27 BF 40                   	ld	p3, =mc
 1631/ 5AA : 20 53 03                   	jsr	mp_copy
 1632/ 5AD :                            ;		p2=#mb ; ea=indx0; mp_div();		//  mb /= indx0;
 1633/ 5AD : 26 35 2D                   	ld	p2, =mb
 1634/ 5B0 : 85 C0                      	ld	ea,indx0
 1635/ 5B2 : 20 A3 03                   	jsr	mp_div
 1636/ 5B5 :                            ;
 1637/ 5B5 :                            ;		p2=#mb ; mp_zerochk(); if(a==0) break;
 1638/ 5B5 : 26 35 2D                   	ld	p2, =mb
 1639/ 5B8 : 20 39 03                   	jsr	mp_zerochk
 1640/ 5BB : 6C 21                      	bz	__ew043
 1641/ 5BD :                            ;		
 1642/ 5BD :                            ;		p2=#ma ; p3=#mb ;
 1643/ 5BD : 26 AB 19                   	ld	p2, =ma
 1644/ 5C0 : 27 35 2D                   	ld	p3, =mb
 1645/ 5C3 :                            ;
 1646/ 5C3 :                            ;		a=sign1;a ^= 1;sign1=a;
 1647/ 5C3 : C5 B9                      	ld	a,sign1
 1648/ 5C5 : E4 01                      	xor	a, =1
 1649/ 5C7 : CD B9                      	st	a,sign1
 1650/ 5C9 :                            ;		if(a!=0) {
 1651/ 5C9 : 6C 06                      	bz	__el045
 1652/ 5CB :                            ;			mp_sub();	// ma += mb;
 1653/ 5CB : 20 31 04                   	jsr	mp_sub
 1654/ 5CE :                            ;		}else{
 1655/ 5CE : 24 D3 05                   	jmp	__fi045
 1656/ 5D1 :                            __el045:
 1657/ 5D1 :                            ;			mp_add();	// ma -= mb;
 1658/ 5D1 : 20 E4 03                   	jsr	mp_add
 1659/ 5D4 :                            ;		}
 1660/ 5D4 :                            __fi045:
 1661/ 5D4 :                            ;
 1662/ 5D4 :                            ;		// indx0 += 2;
 1663/ 5D4 :                            ;		ea=indx0;ea+=2;
 1664/ 5D4 : 85 C0                      	ld	ea,indx0
 1665/ 5D6 : B4 02 00                   	add	ea, =2
 1666/ 5D9 :                            ;		indx0=ea;
 1667/ 5D9 : 8D C0                      	st	ea,indx0
 1668/ 5DB :                            ;	}
 1669/ 5DB : 24 7A 05                   	jmp	__wh043
 1670/ 5DE :                            __ew043:
 1671/ 5DE :                            ;
 1672/ 5DE :                            ;	a='A'; ma_dump();
 1673/ 5DE : C4 41                      	ld	a, ='A'
 1674/ 5E0 : 20 88 03                   	jsr	ma_dump
 1675/ 5E3 :                            ;}
 1676/ 5E3 : 5C                         	ret
 1677/ 5E4 :                            ;
 1678/ 5E4 :                            ;dump_pi()
 1679/ 5E4 :                            ;{
 1680/ 5E4 :                            dump_pi:
 1681/ 5E4 :                            ;	p2=#Pi; mdump(); //メモリーダンプの実行.
 1682/ 5E4 : 26 21 06                   	ld	p2, =Pi
 1683/ 5E7 : 20 56 01                   	jsr	mdump
 1684/ 5EA :                            ;}
 1685/ 5EA : 5C                         	ret
 1686/ 5EB :                            ;/**********************************************************************
 1687/ 5EB :                            ; *	マチンの公式でπを計算して、Pi に格納
 1688/ 5EB :                            ; **********************************************************************
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 30 - 2025年01月23日 14時38分38秒


 1689/ 5EB :                            ; */
 1690/ 5EB :                            ;calc_pi()
 1691/ 5EB :                            ;{
 1692/ 5EB :                            calc_pi:
 1693/ 5EB :                            ;//	16 arctan(1/5)
 1694/ 5EB :                            ;	m1=16;n1=5;
 1695/ 5EB : C4 10                      	ld	a, =16
 1696/ 5ED : CD B6                      	st	a,m1
 1697/ 5EF : C4 05                      	ld	a, =5
 1698/ 5F1 : CD B8                      	st	a,n1
 1699/ 5F3 :                            ;	calc_M_atan_1_N();
 1700/ 5F3 : 20 45 05                   	jsr	calc_M_atan_1_N
 1701/ 5F6 :                            ;	p2=#Pi ; p3=#ma ; mp_copy();		//	*Pi = *ma;
 1702/ 5F6 : 26 21 06                   	ld	p2, =Pi
 1703/ 5F9 : 27 AB 19                   	ld	p3, =ma
 1704/ 5FC : 20 53 03                   	jsr	mp_copy
 1705/ 5FF :                            ;
 1706/ 5FF :                            ;// -4 arctan(1/239)
 1707/ 5FF :                            ;	m1=4;n1=239;
 1708/ 5FF : C4 04                      	ld	a, =4
 1709/ 601 : CD B6                      	st	a,m1
 1710/ 603 : C4 EF                      	ld	a, =239
 1711/ 605 : CD B8                      	st	a,n1
 1712/ 607 :                            ;	calc_M_atan_1_N();
 1713/ 607 : 20 45 05                   	jsr	calc_M_atan_1_N
 1714/ 60A :                            ;	p2=#Pi ; p3=#ma ; mp_sub();			// *Pi -= *ma;
 1715/ 60A : 26 21 06                   	ld	p2, =Pi
 1716/ 60D : 27 AB 19                   	ld	p3, =ma
 1717/ 610 : 20 31 04                   	jsr	mp_sub
 1718/ 613 :                            ;
 1719/ 613 :                            ;// ===> Pi
 1720/ 613 :                            ;}
 1721/ 613 : 5C                         	ret
 1722/ 614 :                            ;
 1723/ 614 :                            ;/**********************************************************************
 1724/ 614 :                            ; *	メインルーチン.
 1725/ 614 :                            ; **********************************************************************
 1726/ 614 :                            ; */
 1727/ 614 :                            ;pi_main()
 1728/ 614 :                            ;{
 1729/ 614 :                            pi_main:
 1730/ 614 :                            ;	p2=#PI_MSG_1;puts();	
 1731/ 614 : 26 9C 02                   	ld	p2, =PI_MSG_1
 1732/ 617 : 20 E0 01                   	jsr	puts
 1733/ 61A :                            ;
 1734/ 61A :                            ;	// 円周率計算.
 1735/ 61A :                            ;	calc_pi();
 1736/ 61A : 20 EA 05                   	jsr	calc_pi
 1737/ 61D :                            ;
 1738/ 61D :                            ;	// 円周率Print.
 1739/ 61D :                            ;	print_pi();
 1740/ 61D : 20 CA 04                   	jsr	print_pi
 1741/ 620 :                            ;}
 1742/ 620 : 5C                         	ret
 1743/ 621 :                            ;/**********************************************************************
 1744/ 621 :                            ; *
 1745/ 621 :                            ; **********************************************************************
 1746/ 621 :                            ; */
 1747/ 621 :                            ;
 1748/ 621 :                            ;Pi: 
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 31 - 2025年01月23日 14時38分38秒


 1749/ 621 :                            Pi:
 1750/ 621 :                            ;	ds(PRECISION+2);
 1751/ 621 :                            	ds	PRECISION+2
 1752/19AB :                            ;ma: 
 1753/19AB :                            ma:
 1754/19AB :                            ;	ds(PRECISION+2);
 1755/19AB :                            	ds	PRECISION+2
 1756/2D35 :                            ;mb: 
 1757/2D35 :                            mb:
 1758/2D35 :                            ;	ds(PRECISION+2);
 1759/2D35 :                            	ds	PRECISION+2
 1760/40BF :                            ;mc: 
 1761/40BF :                            mc:
 1762/40BF :                            ;	ds(PRECISION+2);
 1763/40BF :                            	ds	PRECISION+2
 1764/5449 :                            ;_workend:
 1765/5449 :                            _workend:
 1766/5449 :                            ;	ds(2);
 1767/5449 :                            	ds	2
 1768/544B :                            ;//
 1769/544B :                            
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 32 - 2025年01月23日 14時38分38秒


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
 ASCDUMP1 :                     119 C |  ASCDUMP_16 :                    FE C |
 ASCDUMP_8 :                    10B C | *BENCHMARK :                     34 C |
 BENCH_SUBR :                    51 C |  BENCH_SUBR2 :                   5D C |
*BUFEND :                       29B C |  CALC_M_ATAN_1_N :              546 C |
 CALC_PI :                      5EB C | *CASESENSITIVE :                  0 - |
 CHR1 :                        FFBC - |  CMD :                           62 C |
 CNT1 :                        FF81 - |  CNT2 :                        FF82 - |
 CNT3 :                        FFB3 - | *CNT4 :                        FFB4 - |
*CONSTPI :        3.141592653589793 - |  CYR0 :                        FFB0 - |
 CYR1 :                        FFB1 - |  CYR2 :                        FFB2 - |
*DATE :             "2025\-027\-071\-07601\-026\-100\-12023\-026\-105\-091" - |
 DIV32_16 :                     2C2 C |  DIVCNT :                      FFC4 - |
*DIV_TEST :                     305 C | *DUMP_PI :                      5E4 C |
 EA_MUL10 :                     47F C |  EA_MUL_EA :                    486 C |
 EXIT :                           B C | *FALSE :                          0 - |
 GETC :                           7 C |  GETS :                         1EB C |
*HAS64 :                          1 - |  INBUF :                        21B C |
 INDX0 :                       FFC0 - | *INDX1 :                       FFC1 - |
 LC :                           144 C |  LF1 :                         FFBB - |
*LISTON :                         1 - |  M1 :                          FFB6 - |
 MA :                          19AB C | *MACEXP :                         7 - |
 MAIN :                           D C |  MA_DUMP :                      389 C |
 MB :                          2D35 C | *MB_DUMP :                      392 C |
 MC :                          40BF C | *MC_DUMP :                      39B C |
 MDUMP :                        157 C |  MDUMP_16 :                     163 C |
 MDUMP_8 :                      17E C | *MDUMP_B16 :                    18F C |
*MOMCPU :                      8070 - | *MOMCPUNAME :                "8070" - |
 MP_ADD :                       3E5 C |  MP_COPY :                      354 C |
 MP_DIV :                       3A4 C |  MP_MUL10 :                     48A C |
 MP_SET :                       31E C |  MP_SUB :                       432 C |
 MP_ZEROCHK :                   33A C |  MSG1 :                         202 C |
 N1 :                          FFB8 - | *NESTMAX :                      100 - |
 N_2 :                         FFC2 - |  P2_DUMP :                      368 C |
 P2_LAST :                      3D3 C |  P3_LAST :                      3DC C |
 P4 :                          FF84 - |  P4MUL16 :                       9D C |
 P5 :                          FF86 - |  PI :                           621 C |
*PI_DUMP :                      380 C |  PI_EQU_1 :                     2B6 C |
 PI_EQU_2 :                     2BC C |  PI_MAIN :                      614 C |
 PI_MSG_1 :                     29C C |  PRECISION :                   1388 - |
 PRHEX1 :                       1B8 C |  PRHEX2 :                       1A9 C |
 PRHEX4 :                       1A0 C |  PRINT_PI :                     4CB C |
 PR_SPC :                       1D0 C |  PUTC :                           9 C |
 PUTS :                         1E1 C |  PUT_CRLF :                     1D6 C |
 Q0 :                          FFA0 - | *Q0_DUMP :                      377 C |
*Q1 :                          FFA1 - |  Q2 :                          FFA2 - |
*Q3 :                          FFA3 - |  Q4 :                          FFA4 - |
*Q5 :                          FFA5 - |  R0 :                          FFA8 - |
 R1 :                          FFAA - |  R2 :                          FFAC - |
 R3 :                          FFAE - |  R4 :                          FF83 - |
 READHEX :                       A8 C |  READHEX1 :                      D7 C |
*RELAXED :                        0 - |  SIGN1 :                       FFB9 - |
 SP_SKIP :                       8F C |  TAB1 :                        FFBA - |
*TIME :               "14\-026\-103\-12638\-027\-120\-12238\-025\-089\-110" - |
 TOP1 :                        FFBD - | *TRUE :                           1 - |
*UC :                           131 C | *VERSION :                     142F - |
*WK1 :                         FF80 - | *_WORKEND :                    5449 C |
 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 33 - 2025年01月23日 14時38分38秒


 __DO001 :                       38 C |  __DO002 :                       3C C |
 __DO003 :                       55 C |  __DO014 :                      10F C |
 __DO021 :                      15B C |  __DO022 :                      182 C |
 __DO023 :                      193 C |  __DO025 :                      1E1 C |
 __DO026 :                      1EB C |  __DO027 :                      2D2 C |
 __DO029 :                      32B C |  __DO030 :                      342 C |
 __DO032 :                      359 C |  __DO033 :                      3B5 C |
 __DO034 :                      408 C |  __DO036 :                      455 C |
 __DO038 :                      4A6 C |  __DO039 :                      4E0 C |
 __EL004 :                       86 C |  __EL005 :                       79 C |
 __EL006 :                       8E C |  __EL009 :                       D0 C |
 __EL010 :                       EB C |  __EL011 :                       EB C |
 __EL012 :                       FB C |  __EL013 :                       FB C |
 __EL015 :                      122 C |  __EL016 :                      12C C |
 __EL017 :                      142 C |  __EL018 :                      142 C |
 __EL019 :                      155 C |  __EL020 :                      155 C |
 __EL024 :                      1C8 C |  __EL028 :                      2FF C |
 __EL031 :                      347 C |  __EL035 :                      423 C |
 __EL037 :                      470 C |  __EL040 :                      511 C |
 __EL041 :                      538 C |  __EL042 :                      538 C |
 __EL044 :                      58C C |  __EL045 :                      5D1 C |
*__EW000 :                       30 C |  __EW007 :                       9C C |
*__EW008 :                       D6 C |  __EW043 :                      5DE C |
 __FI009 :                       D3 C |  __FI024 :                      1C9 C |
 __FI028 :                      300 C |  __FI040 :                      538 C |
 __FI044 :                      5A4 C |  __FI045 :                      5D4 C |
*__OD001 :                       47 C | *__OD002 :                       43 C |
*__OD003 :                       5C C | *__OD014 :                      118 C |
*__OD021 :                      162 C | *__OD022 :                      18E C |
*__OD023 :                      19F C |  __OD025 :                      1EA C |
 __OD026 :                      1FD C | *__OD027 :                      304 C |
*__OD029 :                      339 C | *__OD030 :                      351 C |
*__OD032 :                      367 C | *__OD033 :                      3D2 C |
*__OD034 :                      431 C | *__OD036 :                      47E C |
*__OD038 :                      4CA C | *__OD039 :                      542 C |
 __WH000 :                       16 C |  __WH007 :                       91 C |
 __WH008 :                       AF C |  __WH043 :                      57B C |

    185 symbols
     50 unused symbols

 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 34 - 2025年01月23日 14時38分38秒


  Defined Macros:
  ---------------

DEC_W                                 |

      1 macro

 AS V1.42 Beta [Bld 269] - Source File moni3.asm - Page 35 - 2025年01月23日 14時38分38秒


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.03 seconds assembly time

   1769 lines source file
   1817 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
